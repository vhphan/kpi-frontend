import{e as B,s as h,f as O,g as A,i as G,h as J,j as W,k as X,l as Y,m as ee,n as te,p as le,q as ae,r as Z,v as se,x as ie,o as r,c as w,y as c,u as t,S as oe,N as E,a,w as n,K as ne,D as z,z as re,A as ue,B as de,C as ce,E as me,G as I,H as pe,I as fe,J as q,L as v,M as H,O as ye,P as he,b as F,R as M,_ as ge,T as xe,U as Se,V as ve,W as ke,X as Ce,Y as D,Z as Me,$ as Fe,Q as be,F as N,a0 as _e,a1 as we,a2 as V,a3 as T,a4 as $e,a5 as Le,a6 as K,a7 as Ue,a8 as De,a9 as P,aa as Ve,ab as Te,ac as Oe}from"./index-ccdb6a43.js";const qe={__name:"EChartLineMulti",props:{data:{type:Array,required:!0},colorMapping:{type:Object,default:()=>{}},kpiColumn:{type:String,required:!0},addOption:{type:Object,default:()=>{}},showZoom:{type:Boolean,default:!0},timeUnit:{type:String,default:"daily"},theme:{type:String,default:"dark"},cellName:{type:String,default:""},showLegend:{type:Boolean,default:!0},tech:{type:String,default:"nr"}},setup(i){const s=i,e=B(),o="Asia/Singapore",{dataZoomStart:g,dataZoomEnd:y,selectedOperators:k}=h(e),C=O(()=>e.chartColors.flex.backgroundColor[L.value][s.tech]),x=function(d,p,S){if(p===void 0)return{};if(!p.map)return{};const u=p.filter(l=>k.value.includes(l.name));return{renderer:"canvas",legend:{top:"11%",left:"10%",padding:[0,0,0,10],show:S},dataZoom:[{type:"slider",start:g.value[s.timeUnit],end:y.value[s.timeUnit],show:s.showZoom}],grid:{left:"11%",top:"20%",right:"11%",bottom:s.showZoom?"25%":"13%"},backgroundColor:C.value,xAxis:{type:"time",splitLine:{show:!1}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:l=>`${Math.round(l[0].value[1]*100)/100}`},title:{text:d,textStyle:{fontSize:15},triggerEvent:!0},yAxis:{splitLine:{show:!1},type:"value",scale:!0,name:"",axisLabel:{inside:!1,formatter:l=>l>=1e6?`${(l/1e6).toFixed(2)}M`:l>=1e3?`${(l/1e3).toFixed(0)}k`:l}},series:u.map(l=>{if(!l.data||!l.data.map)return{};const f={data:l.data.map(U=>[re(U[0],o),U[1]]).sort((U,j)=>U[0]-j[0]),type:"line",name:l.name};return s.colorMapping[l.name]?{...f,itemStyle:{color:s.colorMapping[l.name]}}:f}),...s.addOption}},$=O(()=>x(s.kpiColumn,s.data,s.showLegend));A([G,J,W,X,Y,ee,te,le,ae]);const m=Z(null);se(m,d=>{m.value&&ie(s.timeUnit)},{immediate:!0});const{darkMode:b}=h(e),L=O(()=>b.value?"dark":"light"),Q=function(d){e.updateDataZoom(d,s.timeUnit)},_=Z(!1),R=function(d){d.componentType==="title"&&(_.value=!0)};return(d,p)=>(r(),w("div",null,[i.data&&i.data.length>0?(r(),c(t(oe),{key:0,ref_key:"chartRef",ref:m,option:t($),theme:t(L),autoresize:!0,style:{height:"300px"},group:i.timeUnit,onDatazoom:Q,id:i.kpiColumn,onClick:R},null,8,["option","theme","group","id"])):(r(),c(E,{key:1,"kpi-column":i.kpiColumn},null,8,["kpi-column"])),a(z,{"model-dialog":_.value,onOnHide:p[0]||(p[0]=S=>_.value=!1),title:"KPI Formula"},{default:n(()=>[a(ne,{"kpi-name":i.kpiColumn,"kpi-type":"flex"},null,8,["kpi-name"])]),_:1},8,["model-dialog"])]))}},Qe={__name:"OperatorsSelector",setup(i){const s=B(),{selectorClass:e}=s,o=O({get(){return s.selectedOperators},set(y){s.selectedOperators=y}}),g=ue.map(y=>({label:y,value:y}));return(y,k)=>(r(),w("div",null,[a(H,{filled:"",modelValue:t(o),"onUpdate:modelValue":k[0]||(k[0]=C=>q(o)?o.value=C:null),options:t(g),label:"MNO to Display",multiple:"","emit-value":"","map-options":"",style:{"min-width":"200px","max-width":"251px","max-height":"20px"},class:v(t(e))},{option:n(({itemProps:C,opt:x,selected:$,toggleOption:m})=>[a(de,ce(me(C)),{default:n(()=>[a(I,null,{default:n(()=>[a(pe,{innerHTML:x.label},null,8,["innerHTML"])]),_:2},1024),a(I,{side:""},{default:n(()=>[a(fe,{"model-value":$,"onUpdate:modelValue":b=>m(x)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","class"])]))}},Re={class:"row"},Ne={style:{height:"4rem","padding-top":"0"}},Ze=F("legend",null,"Data",-1),Be={style:{height:"4rem","padding-top":"0"}},Ie=F("legend",null,"KPI",-1),Ke={class:"row"},Ee={__name:"StatsFlex",props:{timeUnit:{type:String,required:!0,validator(i){return["daily","hourly"].includes(i)}},level:{type:String,required:!0,validator(i){return["cluster","region","cell","site","multipleCells","multipleSites"].includes(i)}}},setup(i){const s=i,e=B(),{selectedTech:o}=h(e),{selectedRegion:g,selectedCluster:y,kpiToExclude:k}=h(e),x=function(){const S={daily:{region:e.dailyStatsRegionFlexMeta,cluster:e.dailyStatsClusterFlexMeta,cell:e.dailyStatsCellFlexMeta,site:e.dailyStatsSiteFlexMeta,multipleCells:e.dailyStatsMultipleCellsFlexMeta,multipleSites:e.dailyStatsMultipleSitesFlexMeta},hourly:{region:e.hourlyStatsRegionFlexMeta,cluster:e.hourlyStatsClusterFlexMeta,cell:e.hourlyStatsCellFlexMeta,site:e.hourlyStatsSiteFlexMeta,multipleCells:e.hourlyStatsMultipleCellsFlexMeta,multipleSites:e.hourlyStatsMultipleSitesFlexMeta}};if(S[s.timeUnit]&&S[s.timeUnit][s.level])return S[s.timeUnit][s.level];throw new Error("Invalid timeUnit or level")}(),m={cluster:{hourly:e.hourlyStatsClusterFlex,daily:e.dailyStatsClusterFlex},region:{hourly:e.hourlyStatsRegionFlex,daily:e.dailyStatsRegionFlex},cell:{hourly:e.hourlyStatsCellFlex,daily:e.dailyStatsCellFlex},site:{hourly:e.hourlyStatsSiteFlex,daily:e.dailyStatsSiteFlex},multipleCells:{hourly:e.hourlyStatsMultipleCellsFlex,daily:e.dailyStatsMultipleCellsFlex},multipleSites:{hourly:e.hourlyStatsMultipleSitesFlex,daily:e.dailyStatsMultipleSitesFlex}}[s.level][s.timeUnit],{fetchData:b}=ye("flex",s,m,x,o);h(e).kpiListFlex;const{kpiListToDisplayFlex:L}=h(e),{regionsArray:Q}=h(e);he(()=>{console.log("onMounted"),b()});const{colorMapping:_,chartSizeClass:R,selectorClass:d}=h(e),p=Z(!1);return(S,u)=>(r(),w(N,null,[F("div",Re,[["multipleCells","multipleSites"].includes(i.level)?M("",!0):(r(),c(H,{key:0,options:t(Q),modelValue:t(g),"onUpdate:modelValue":u[0]||(u[0]=l=>q(g)?g.value=l:null),class:v(t(d)),outlined:""},null,8,["options","modelValue","class"])),i.level==="multipleCells"?(r(),c(ge,{key:1,tech:t(o)},null,8,["tech"])):M("",!0),i.level==="multipleSites"?(r(),c(xe,{key:2,"api-route-value":t(_e).verifySitesList,"store-key-update-time":"selectedMultipleSitesUpdateTime","store-key":"selectedMultipleSites",tech:t(o),"node-name":"site","sync-both-tech":"",example:"DBKLG0424"},null,8,["api-route-value","tech"])):M("",!0),s.level==="cluster"?(r(),c(Se,{key:3,class:v(t(d)),outlined:""},null,8,["class"])):M("",!0),i.level==="cell"?(r(),c(ve,{key:4,tech:t(o),class:v(t(d)),outlined:""},null,8,["tech","class"])):M("",!0),i.level==="site"?(r(),c(ke,{key:5,tech:t(o),class:v(t(d)),outlined:""},null,8,["tech","class"])):M("",!0),a(Ce,{"kpi-type":"flex",tech:t(o),class:v(t(d)),onNewVal:t(we)},null,8,["tech","class","onNewVal"]),a(Qe),F("fieldset",Ne,[Ze,a(D,{icon:"refresh",onClick:t(b),color:"primary",class:"q-mb-md q-ml-xs"},{default:n(()=>[a(V,null,{default:n(()=>[T(" Re-fetch data from server ")]),_:1})]),_:1},8,["onClick"]),a(Me,{"file-name":`${i.level}_${i.timeUnit}_flex_kpi.csv`,data:t(m)[t(o)],class:"q-mb-md q-ml-xs","kpi-type":"flex"},null,8,["file-name","data"])]),F("fieldset",Be,[Ie,a(D,{icon:"settings",class:"q-mb-xl q-ml-xs",color:"deep-orange-13",onClick:u[1]||(u[1]=l=>p.value=!0)},{default:n(()=>[a(V,null,{default:n(()=>[T(" Select KPI to display and order ")]),_:1})]),_:1}),t(e).showFlexLegend?(r(),c(D,{key:0,icon:"visibility_off",class:"q-mb-xl q-ml-xs",color:"deep-purple-13",onClick:u[2]||(u[2]=()=>t(e).showFlexLegend=!1)},{default:n(()=>[a(V,null,{default:n(()=>[T("Hide Chart Legend")]),_:1})]),_:1})):(r(),c(D,{key:1,icon:"visibility",class:"q-mb-xl q-ml-xs",color:"deep-purple-13",onClick:u[3]||(u[3]=()=>t(e).showFlexLegend=!0)},{default:n(()=>[a(V,null,{default:n(()=>[T("Show Chart Legend")]),_:1})]),_:1})),a($e)]),a(Fe,{tab:t(o),level:i.level,"store-meta":t(x)},null,8,["tab","level","store-meta"])]),a(be,null,{default:n(()=>[a(Le,{modelValue:t(o),"onUpdate:modelValue":u[4]||(u[4]=l=>q(o)?o.value=l:null),dense:"",class:"",style:{border:"1px solid #6a6af1"},"active-color":"primary",align:"justify","narrow-indicator":"","active-class":"bg-primary text-white"},{default:n(()=>[a(K,{name:"nr",label:"NR"}),a(K,{name:"lte",label:"LTE"})]),_:1},8,["modelValue"]),a(Ue),a(De,{modelValue:t(o),"onUpdate:modelValue":u[5]||(u[5]=l=>q(o)?o.value=l:null),animated:""},{default:n(()=>[(r(),w(N,null,P(["nr","lte"],l=>a(Te,{name:l},{default:n(()=>[F("div",Ke,[(r(!0),w(N,null,P(t(L)[l].filter(f=>t(k).indexOf(f)===-1),f=>(r(),c(Oe,{class:v(t(R).value),style:{border:"1px #d1d1f5 solid"},once:""},{default:n(()=>[t(m)[l][f]?(r(),c(qe,{key:0,data:t(m)[l][f],kpiColumn:f,"time-unit":i.timeUnit,"color-mapping":t(_),"show-legend":t(e).showFlexLegend,tech:t(o)},null,8,["data","kpiColumn","time-unit","color-mapping","show-legend","tech"])):(r(),c(E,{key:1,"kpi-column":f},null,8,["kpi-column"]))]),_:2},1032,["class"]))),256))])]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1}),a(z,{modelDialog:p.value,title:`Select KPI to Display and Order [${t(o).toUpperCase()}]`,onOnHide:u[6]||(u[6]=l=>p.value=!1)},{default:n(()=>[a(Ve,{"kpi-type":"flex",tech:t(o)},null,8,["tech"])]),_:1},8,["modelDialog","title"])],64))}};export{Ee as default};
