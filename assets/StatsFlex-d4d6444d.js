import{e as P,s as S,f as Y,i as ee,g as te,h as le,j as ae,k as ne,l as oe,m as se,n as ie,p as re,r as $,q as O,v as ue,x as H,o as i,y,u as e,S as ce,N as G,z as de,A as me,B as pe,C as fe,c as p,b as D,a as f,D as N,E as w,G as ge,_ as ye,H as g,I as ve,J as he,t as C,w as M,Q as Se,F as E,K as I,L as z,M as xe,O as B,P as ke,R as Ce,T as A,U as Fe,V as we}from"./index-a29490da.js";const Me={__name:"EChartLineMulti",props:{data:{type:Array,required:!0},colorMapping:{type:Object,default:()=>{}},kpiColumn:{type:String,required:!0},addOption:{type:Object,default:()=>{}},showZoom:{type:Boolean,default:!0},timeUnit:{type:String,default:"daily"},theme:{type:String,default:"dark"},cellName:{type:String,default:""}},setup(n){const t=n,l=P(),a="Asia/Singapore",{dataZoomStart:F,dataZoomEnd:Q}=S(l),T=function(o,x,R=""){return x===void 0?{}:x.map?{renderer:"canvas",legend:{top:"11%",left:"10%",padding:[0,0,0,10],show:!0},dataZoom:[{type:"slider",start:F.value[t.timeUnit],end:Q.value[t.timeUnit],show:t.showZoom}],grid:{left:"11%",top:"20%",right:"11%",bottom:t.showZoom?"25%":"13%"},xAxis:{type:"time",splitLine:{show:!1}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:s=>`${Math.round(s[0].value[1]*100)/100}`},title:{text:o,textStyle:{fontSize:15},triggerEvent:!0},yAxis:{splitLine:{show:!1},type:"value",scale:!0,name:"",axisLabel:{inside:!1,formatter:s=>s>=1e6?`${(s/1e6).toFixed(2)}M`:s>=1e3?`${(s/1e3).toFixed(0)}k`:s}},series:x.map(s=>{if(!s.data||!s.data.map)return{};const b={data:s.data.map(h=>[de(h[0],a),h[1]]).sort((h,L)=>h[0]-L[0]),type:"line",name:s.name};return t.colorMapping[s.name]?{...b,itemStyle:{color:t.colorMapping[s.name]}}:b}),...t.addOption}:{}},Z=T(t.kpiColumn,t.data);Y([ee,te,le,ae,ne,oe,se,ie,re]);const v=$(null);O(v,o=>{v.value&&ue(t.timeUnit)},{immediate:!0});const d=()=>{v.value&&v.value.setOption(T(t.kpiColumn,t.data,t.seriesName))};O([()=>t.data,()=>t.colorMapping],()=>{d()},{deep:!0});const{darkMode:U}=S(l),r=H(()=>U.value?"dark":"light"),j=function(o){l.updateDataZoom(o,t.timeUnit)};return(o,x)=>n.data&&n.data.length>0?(i(),y(e(ce),{key:0,ref_key:"chartRef",ref:v,option:e(Z),theme:e(r),autoresize:!0,style:{height:"300px"},group:n.timeUnit,onDatazoom:j},null,8,["option","theme","group"])):(i(),y(G,{key:1,"kpi-column":n.kpiColumn},null,8,["kpi-column"]))}},Ue={class:"row"},be={key:3,class:"col q-pl-md q-pt-md"},_e={key:0},Ve={key:1},De={key:2},$e={key:3},Oe={class:"row"},Re={__name:"StatsFlex",props:{timeUnit:{type:String,required:!0,validator(n){return["daily","hourly"].includes(n)}},level:{type:String,required:!0,validator(n){return["cluster","region","cell","site","multipleCells"].includes(n)}}},setup(n){const t=n,l=P(),{selectedTech:a}=S(l),{selectedRegion:F,selectedCluster:Q,kpiColumnsFlex:T,kpiColumnsFlexHourly:Z,kpiToExclude:v}=S(l),d=H(()=>l.urlForPage("flex",t.level,t.timeUnit)),U=function(){const u={daily:{region:l.dailyStatsRegionFlexMeta,cluster:l.dailyStatsClusterFlexMeta,cell:l.dailyStatsCellFlexMeta,site:l.dailyStatsSiteFlexMeta},hourly:{region:l.hourlyStatsRegionFlexMeta,cluster:l.hourlyStatsClusterFlexMeta,cell:l.hourlyStatsCellFlexMeta,site:l.hourlyStatsSiteFlexMeta}};if(u[t.timeUnit]&&u[t.timeUnit][t.level])return u[t.timeUnit][t.level];throw new Error("Invalid timeUnit or level")},r=U(),o={cluster:{hourly:l.hourlyStatsClusterFlex,daily:l.dailyStatsClusterFlex},region:{hourly:l.hourlyStatsRegionFlex,daily:l.dailyStatsRegionFlex},cell:{hourly:l.hourlyStatsCellFlex,daily:l.dailyStatsCellFlex},site:{hourly:l.hourlyStatsSiteFlex,daily:l.dailyStatsSiteFlex}}[t.level][t.timeUnit];function x(u){if(console.log("setStoreData"),!u){console.log("No data");return}if(o&&Object.keys(o).includes("nr")&&Object.keys(o).includes("lte")){o[a.value]=u.data,r[a.value]=u.meta,s.value=I();return}throw console.log(o.value),new Error("Invalid timeUnit or level in setStoreData")}function R(){console.log("clearStoreData");const u=U();if(z({message:"Invalid or No Selection. Select a valid option."}),o&&Object.keys(o).includes("nr")&&Object.keys(o).includes("lte")){o[a.value]=[],u[a.value]={};return}throw console.log(o.value),new Error("Invalid timeUnit or level in clearStoreData")}const s=$(I()),b=S(l).kpiListFlex,h=me(),{regionsArray:L}=S(l),J=function(){return t.level==="cell"&&d.value.includes("cell=null")?(console.log("cell=null"),!1):t.level==="site"&&d.value.includes("site=null")?(console.log("site=null"),!1):t.level==="cluster"&&d.value.includes("cluster=null")?(console.log("cluster=null"),!1):t.level==="region"&&d.value.includes("region=null")?(console.log("region=null"),!1):!0},K=pe(),_=$(!1),q=async function(){if(console.log("fetchData"),!J()){z({message:`Invalid or No Selection. Select a valid option. ${t.level}`}),R();return}_.value=!0;const u=await K.get(d.value);if(_.value=!1,u.status===200){x(u.data);return}R()};O(_,(u,m)=>{if(console.log("isLoading changed"),_.value){h.loading.show({});return}h.loading.hide()}),O(d,(u,m)=>{console.log("urlRef changed"),q()},{immediate:!1}),fe(()=>{console.log("onMounted"),q()});const{colorMapping:W,chartSizeClass:X}=S(l),V=$("col-xs-12 col-md-6 col-lg-4 col-xl-3 q-mb-md");return(u,m)=>(i(),p(E,null,[D("div",Ue,[f(ge,{options:e(L),modelValue:e(F),"onUpdate:modelValue":m[0]||(m[0]=c=>N(F)?F.value=c:null),class:w(V.value),outlined:""},null,8,["options","modelValue","class"]),t.level==="cluster"?(i(),y(ye,{key:0,class:w(V.value),outlined:""},null,8,["class"])):g("",!0),n.level==="cell"?(i(),y(ve,{key:1,tech:e(a),class:w(V.value),outlined:""},null,8,["tech","class"])):g("",!0),n.level==="site"?(i(),y(he,{key:2,tech:e(a),class:w(V.value),outlined:""},null,8,["tech","class"])):g("",!0),e(r)[e(a)]&&e(r)[e(a)].time?(i(),p("div",be,[D("span",null,"Data Fetched @: "+C(new Date(e(r)[e(a)].time))+",  ",1),D("span",null,"Tech: "+C(e(r)[e(a)].tech.toUpperCase())+",  ",1),e(r)[e(a)].cluster&&n.level==="cluster"?(i(),p("span",_e,"Cluster: "+C(e(r)[e(a)].cluster)+",  ",1)):g("",!0),e(r)[e(a)].region&&n.level==="region"?(i(),p("span",Ve,"Region: "+C(e(r)[e(a)].region)+",  ",1)):g("",!0),e(r)[e(a)].cell&&n.level==="cell"?(i(),p("span",De,C(e(r)[e(a)].cell)+",   ",1)):g("",!0),e(r)[e(a)].site&&n.level==="site"?(i(),p("span",$e,C(e(r)[e(a)].site)+",   ",1)):g("",!0)])):g("",!0)]),f(Se,null,{default:M(()=>[f(xe,{modelValue:e(a),"onUpdate:modelValue":m[1]||(m[1]=c=>N(a)?a.value=c:null),dense:"",class:"",style:{border:"1px solid #6a6af1"},"active-color":"primary",align:"justify","narrow-indicator":"","active-class":"bg-primary text-white"},{default:M(()=>[f(B,{name:"nr",label:"NR"}),f(B,{name:"lte",label:"LTE"})]),_:1},8,["modelValue"]),f(ke),f(Ce,{modelValue:e(a),"onUpdate:modelValue":m[2]||(m[2]=c=>N(a)?a.value=c:null),animated:""},{default:M(()=>[(i(),p(E,null,A(["nr","lte"],c=>f(Fe,{name:c},{default:M(()=>[D("div",Oe,[(i(!0),p(E,null,A(e(b)[c].filter(k=>e(v).indexOf(k)===-1),k=>(i(),y(we,{class:w(e(X).value),style:{border:"1px #d1d1f5 solid"}},{default:M(()=>[e(o)[c][k]?(i(),y(Me,{key:0,data:e(o)[c][k],kpiColumn:k,"time-unit":n.timeUnit,"color-mapping":e(W)},null,8,["data","kpiColumn","time-unit","color-mapping"])):(i(),y(G,{key:1,"kpi-column":k},null,8,["kpi-column"]))]),_:2},1032,["class"]))),256))])]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1})],64))}};export{Re as default};
