import{e as N,s as f,f as T,g as z,i as j,h as H,j as A,k as G,l as J,m as W,n as X,p as Y,q as ee,r as O,v as te,x as le,o as n,c as _,y as c,u as t,S as ae,N as E,a as i,w as r,K as se,D as P,z as ie,A as oe,B as ne,b as S,C as V,E as h,G as ue,H as x,_ as re,I as de,J as ce,L as me,M as pe,O as ye,P as w,R as fe,T as ge,Q as he,F as q,U as xe,V as Se,W as b,X as $,Y as ke,Z as B,$ as ve,a0 as Ce,a1 as K,a2 as Me,a3 as Fe,a4 as we}from"./index-acbdab99.js";const be={__name:"EChartLineMulti",props:{data:{type:Array,required:!0},colorMapping:{type:Object,default:()=>{}},kpiColumn:{type:String,required:!0},addOption:{type:Object,default:()=>{}},showZoom:{type:Boolean,default:!0},timeUnit:{type:String,default:"daily"},theme:{type:String,default:"dark"},cellName:{type:String,default:""},showLegend:{type:Boolean,default:!0},tech:{type:String,default:"nr"}},setup(s){const a=s,e=N(),o="Asia/Singapore",{dataZoomStart:k,dataZoomEnd:R,selectedOperators:L}=f(e),Q=T(()=>e.chartColors.flex.backgroundColor[F.value][a.tech]),C=function(d,m,g){return m===void 0?{}:m.map?(m.filter(l=>L.value.includes(l.name)),{renderer:"canvas",legend:{top:"11%",left:"10%",padding:[0,0,0,10],show:g},dataZoom:[{type:"slider",start:k.value[a.timeUnit],end:R.value[a.timeUnit],show:a.showZoom}],grid:{left:"11%",top:"20%",right:"11%",bottom:a.showZoom?"25%":"13%"},backgroundColor:Q.value,xAxis:{type:"time",splitLine:{show:!1}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:l=>`${Math.round(l[0].value[1]*100)/100}`},title:{text:d,textStyle:{fontSize:15},triggerEvent:!0},yAxis:{splitLine:{show:!1},type:"value",scale:!0,name:"",axisLabel:{inside:!1,formatter:l=>l>=1e6?`${(l/1e6).toFixed(2)}M`:l>=1e3?`${(l/1e3).toFixed(0)}k`:l}},series:m.map(l=>{if(!l.data||!l.data.map)return{};const u={data:l.data.map(p=>[ie(p[0],o),p[1]]).sort((p,I)=>p[0]-I[0]),type:"line",name:l.name};return a.colorMapping[l.name]?{...u,itemStyle:{color:a.colorMapping[l.name]}}:u}),...a.addOption}):{}},Z=T(()=>C(a.kpiColumn,a.data,a.showLegend));z([j,H,A,G,J,W,X,Y,ee]);const y=O(null);te(y,d=>{y.value&&le(a.timeUnit)},{immediate:!0});const{darkMode:M}=f(e),F=T(()=>M.value?"dark":"light"),D=function(d){e.updateDataZoom(d,a.timeUnit)},v=O(!1),U=function(d){console.log(d),console.log(a.kpiColumn),d.componentType==="title"&&(v.value=!0),console.log(y.value.getOption())};return(d,m)=>(n(),_("div",null,[s.data&&s.data.length>0?(n(),c(t(ae),{key:0,ref_key:"chartRef",ref:y,option:t(Z),theme:t(F),autoresize:!0,style:{height:"300px"},group:s.timeUnit,onDatazoom:D,id:s.kpiColumn,onClick:U},null,8,["option","theme","group","id"])):(n(),c(E,{key:1,"kpi-column":s.kpiColumn},null,8,["kpi-column"])),i(P,{"model-dialog":v.value,onOnHide:m[0]||(m[0]=g=>v.value=!1),title:"KPI Formula"},{default:r(()=>[i(se,{"kpi-name":s.kpiColumn,"kpi-type":"flex"},null,8,["kpi-name"])]),_:1},8,["model-dialog"])]))}},$e={class:"row"},_e={style:{height:"4rem","padding-top":"0"}},Le=S("legend",null,"Data",-1),De={style:{height:"4rem","padding-top":"0"}},Ue=S("legend",null,"KPI",-1),Te={class:"row"},qe={__name:"StatsFlex",props:{timeUnit:{type:String,required:!0,validator(s){return["daily","hourly"].includes(s)}},level:{type:String,required:!0,validator(s){return["cluster","region","cell","site","multipleCells","multipleSites"].includes(s)}}},setup(s){const a=s,e=N(),{selectedTech:o}=f(e),{selectedRegion:k,selectedCluster:R,kpiToExclude:L}=f(e),C=function(){const g={daily:{region:e.dailyStatsRegionFlexMeta,cluster:e.dailyStatsClusterFlexMeta,cell:e.dailyStatsCellFlexMeta,site:e.dailyStatsSiteFlexMeta,multipleCells:e.dailyStatsMultipleCellsFlexMeta,multipleSites:e.dailyStatsMultipleSitesFlexMeta},hourly:{region:e.hourlyStatsRegionFlexMeta,cluster:e.hourlyStatsClusterFlexMeta,cell:e.hourlyStatsCellFlexMeta,site:e.hourlyStatsSiteFlexMeta,multipleCells:e.hourlyStatsMultipleCellsFlexMeta,multipleSites:e.hourlyStatsMultipleSitesFlexMeta}};if(g[a.timeUnit]&&g[a.timeUnit][a.level])return g[a.timeUnit][a.level];throw new Error("Invalid timeUnit or level")}(),y={cluster:{hourly:e.hourlyStatsClusterFlex,daily:e.dailyStatsClusterFlex},region:{hourly:e.hourlyStatsRegionFlex,daily:e.dailyStatsRegionFlex},cell:{hourly:e.hourlyStatsCellFlex,daily:e.dailyStatsCellFlex},site:{hourly:e.hourlyStatsSiteFlex,daily:e.dailyStatsSiteFlex},multipleCells:{hourly:e.hourlyStatsMultipleCellsFlex,daily:e.dailyStatsMultipleCellsFlex},multipleSites:{hourly:e.hourlyStatsMultipleSitesFlex,daily:e.dailyStatsMultipleSitesFlex}}[a.level][a.timeUnit],{fetchData:M}=oe("flex",a,y,C,o);f(e).kpiListFlex;const{kpiListToDisplayFlex:F}=f(e),{regionsArray:D}=f(e);ne(()=>{console.log("onMounted"),M()});const{colorMapping:v,chartSizeClass:U,selectorClass:d}=f(e),m=O(!1);return(g,l)=>(n(),_(q,null,[S("div",$e,[["multipleCells","multipleSites"].includes(s.level)?x("",!0):(n(),c(ue,{key:0,options:t(D),modelValue:t(k),"onUpdate:modelValue":l[0]||(l[0]=u=>V(k)?k.value=u:null),class:h(t(d)),outlined:""},null,8,["options","modelValue","class"])),s.level==="multipleCells"?(n(),c(re,{key:1,tech:t(o)},null,8,["tech"])):x("",!0),s.level==="multipleSites"?(n(),c(de,{key:2,"api-route-value":t(xe).verifySitesList,"store-key-update-time":"selectedMultipleSitesUpdateTime","store-key":"selectedMultipleSites",tech:t(o),"node-name":"site","sync-both-tech":"",example:"DBKLG0424"},null,8,["api-route-value","tech"])):x("",!0),a.level==="cluster"?(n(),c(ce,{key:3,class:h(t(d)),outlined:""},null,8,["class"])):x("",!0),s.level==="cell"?(n(),c(me,{key:4,tech:t(o),class:h(t(d)),outlined:""},null,8,["tech","class"])):x("",!0),s.level==="site"?(n(),c(pe,{key:5,tech:t(o),class:h(t(d)),outlined:""},null,8,["tech","class"])):x("",!0),i(ye,{"kpi-type":"flex",tech:t(o),class:h(t(d)),onNewVal:t(Se)},null,8,["tech","class","onNewVal"]),S("fieldset",_e,[Le,i(w,{icon:"refresh",onClick:t(M),color:"primary",class:"q-mb-md q-ml-xs"},{default:r(()=>[i(b,null,{default:r(()=>[$(" Re-fetch data from server ")]),_:1})]),_:1},8,["onClick"]),i(fe,{"file-name":`${s.level}_${s.timeUnit}_flex_kpi.csv`,data:t(y)[t(o)],class:"q-mb-md q-ml-xs","kpi-type":"flex"},null,8,["file-name","data"])]),S("fieldset",De,[Ue,i(w,{icon:"settings",class:"q-mb-xl q-ml-xs",color:"deep-orange-13",onClick:l[1]||(l[1]=u=>m.value=!0)},{default:r(()=>[i(b,null,{default:r(()=>[$(" Select KPI to display and order ")]),_:1})]),_:1}),t(e).showFlexLegend?(n(),c(w,{key:0,icon:"visibility_off",class:"q-mb-xl q-ml-xs",color:"deep-purple-13",onClick:l[2]||(l[2]=()=>t(e).showFlexLegend=!1)},{default:r(()=>[i(b,null,{default:r(()=>[$("Hide Chart Legend")]),_:1})]),_:1})):(n(),c(w,{key:1,icon:"visibility",class:"q-mb-xl q-ml-xs",color:"deep-purple-13",onClick:l[3]||(l[3]=()=>t(e).showFlexLegend=!0)},{default:r(()=>[i(b,null,{default:r(()=>[$("Show Chart Legend")]),_:1})]),_:1}))]),i(ge,{tab:t(o),level:s.level,"store-meta":t(C)},null,8,["tab","level","store-meta"])]),i(he,null,{default:r(()=>[i(ke,{modelValue:t(o),"onUpdate:modelValue":l[4]||(l[4]=u=>V(o)?o.value=u:null),dense:"",class:"",style:{border:"1px solid #6a6af1"},"active-color":"primary",align:"justify","narrow-indicator":"","active-class":"bg-primary text-white"},{default:r(()=>[i(B,{name:"nr",label:"NR"}),i(B,{name:"lte",label:"LTE"})]),_:1},8,["modelValue"]),i(ve),i(Ce,{modelValue:t(o),"onUpdate:modelValue":l[5]||(l[5]=u=>V(o)?o.value=u:null),animated:""},{default:r(()=>[(n(),_(q,null,K(["nr","lte"],u=>i(Fe,{name:u},{default:r(()=>[S("div",Te,[(n(!0),_(q,null,K(t(F)[u].filter(p=>t(L).indexOf(p)===-1),p=>(n(),c(we,{class:h(t(U).value),style:{border:"1px #d1d1f5 solid"},once:""},{default:r(()=>[t(y)[u][p]?(n(),c(be,{key:0,data:t(y)[u][p],kpiColumn:p,"time-unit":s.timeUnit,"color-mapping":t(v),"show-legend":t(e).showFlexLegend,tech:t(o)},null,8,["data","kpiColumn","time-unit","color-mapping","show-legend","tech"])):(n(),c(E,{key:1,"kpi-column":p},null,8,["kpi-column"]))]),_:2},1032,["class"]))),256))])]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1}),i(P,{modelDialog:m.value,title:`Select KPI to Display and Order [${t(o).toUpperCase()}]`,onOnHide:l[6]||(l[6]=u=>m.value=!1)},{default:r(()=>[i(Me,{"kpi-type":"flex",tech:t(o)},null,8,["tech"])]),_:1},8,["modelDialog","title"])],64))}};export{qe as default};
