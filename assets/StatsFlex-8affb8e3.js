import{e as E,s as h,f as q,i as z,g as B,h as j,j as A,k as P,l as I,m as G,n as H,p as J,r as N,q as L,v as K,x as W,o as i,y as p,u as e,S as X,N as Q,z as Y,A as ee,B as te,c as d,b as _,a as c,C as U,D as C,E as le,_ as ae,G as m,H as se,I as ne,t as S,w as M,Q as oe,F as $,J as ie,K as O,L as re,M as ue,O as Z,P as de,R as ce}from"./index-84e7b902.js";const me={__name:"EChartLineMulti",props:{data:{type:Array,required:!0},colorMapping:{type:Object,default:()=>{}},kpiColumn:{type:String,required:!0},addOption:{type:Object,default:()=>{}},showZoom:{type:Boolean,default:!0},timeUnit:{type:String,default:"daily"},theme:{type:String,default:"dark"},cellName:{type:String,default:""}},setup(o){const t=o,l=E(),a="Asia/Singapore",{dataZoomStart:v,dataZoomEnd:D}=h(l),F=function(y,g,T=""){return g===void 0?{}:g.map?{renderer:"canvas",legend:{top:"11%",left:"10%",padding:[0,0,0,10],show:!0},dataZoom:[{type:"slider",start:v.value[t.timeUnit],end:D.value[t.timeUnit],show:t.showZoom}],grid:{left:"11%",top:"20%",right:"11%",bottom:t.showZoom?"25%":"13%"},xAxis:{type:"time",splitLine:{show:!1}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:n=>`${Math.round(n[0].value[1]*100)/100}`},title:{text:y,textStyle:{fontSize:15},triggerEvent:!0},yAxis:{splitLine:{show:!1},type:"value",scale:!0,name:"",axisLabel:{inside:!1,formatter:n=>n>=1e6?`${(n/1e6).toFixed(2)}M`:n>=1e3?`${(n/1e3).toFixed(0)}k`:n}},series:g.map(n=>{if(!n.data||!n.data.map)return{};const f={data:n.data.map(u=>[Y(u[0],a),u[1]]).sort((u,r)=>u[0]-r[0]),type:"line",name:n.name};return t.colorMapping[n.name]?{...f,itemStyle:{color:t.colorMapping[n.name]}}:f}),...t.addOption}:{}},V=F(t.kpiColumn,t.data);q([z,B,j,A,P,I,G,H,J]);const s=N(null);L(s,y=>{s.value&&K(t.timeUnit)},{immediate:!0});const R=()=>{s.value&&s.value.setOption(F(t.kpiColumn,t.data,t.seriesName))};L([()=>t.data,()=>t.colorMapping],()=>{R()},{deep:!0});const{darkMode:k}=h(l),w=W(()=>k.value?"dark":"light"),b=function(y){l.updateDataZoom(y,t.timeUnit)};return(y,g)=>o.data&&o.data.length>0?(i(),p(e(X),{key:0,ref_key:"chartRef",ref:s,option:e(V),theme:e(w),autoresize:!0,style:{height:"300px"},group:o.timeUnit,onDatazoom:b},null,8,["option","theme","group"])):(i(),p(Q,{key:1,"kpi-column":o.kpiColumn},null,8,["kpi-column"]))}},pe={class:"row"},ye={key:3,class:"col q-pl-md q-pt-md"},fe={key:0},he={key:1},ge={key:2},xe={key:3},Se={class:"row"},ke={__name:"StatsFlex",props:{timeUnit:{type:String,required:!0,validator(o){return["daily","hourly"].includes(o)}},level:{type:String,required:!0,validator(o){return["cluster","region","cell","site","multipleCells"].includes(o)}}},setup(o){const t=o,l=E(),{selectedTech:a}=h(l),{selectedRegion:v,selectedCluster:D,kpiToExclude:F}=h(l),s=function(){const f={daily:{region:l.dailyStatsRegionFlexMeta,cluster:l.dailyStatsClusterFlexMeta,cell:l.dailyStatsCellFlexMeta,site:l.dailyStatsSiteFlexMeta},hourly:{region:l.hourlyStatsRegionFlexMeta,cluster:l.hourlyStatsClusterFlexMeta,cell:l.hourlyStatsCellFlexMeta,site:l.hourlyStatsSiteFlexMeta}};if(f[t.timeUnit]&&f[t.timeUnit][t.level])return f[t.timeUnit][t.level];throw new Error("Invalid timeUnit or level")}(),k={cluster:{hourly:l.hourlyStatsClusterFlex,daily:l.dailyStatsClusterFlex},region:{hourly:l.hourlyStatsRegionFlex,daily:l.dailyStatsRegionFlex},cell:{hourly:l.hourlyStatsCellFlex,daily:l.dailyStatsCellFlex},site:{hourly:l.hourlyStatsSiteFlex,daily:l.dailyStatsSiteFlex}}[t.level][t.timeUnit],{fetchData:w}=ee("flex",t,k,s,a),b=h(l).kpiListFlex,{regionsArray:y}=h(l);te(()=>{console.log("onMounted"),w()});const{colorMapping:g,chartSizeClass:T}=h(l),n=N("col-xs-12 col-md-6 col-lg-4 col-xl-3 q-mb-md");return(f,u)=>(i(),d($,null,[_("div",pe,[c(le,{options:e(y),modelValue:e(v),"onUpdate:modelValue":u[0]||(u[0]=r=>U(v)?v.value=r:null),class:C(n.value),outlined:""},null,8,["options","modelValue","class"]),t.level==="cluster"?(i(),p(ae,{key:0,class:C(n.value),outlined:""},null,8,["class"])):m("",!0),o.level==="cell"?(i(),p(se,{key:1,tech:e(a),class:C(n.value),outlined:""},null,8,["tech","class"])):m("",!0),o.level==="site"?(i(),p(ne,{key:2,tech:e(a),class:C(n.value),outlined:""},null,8,["tech","class"])):m("",!0),e(s)[e(a)]&&e(s)[e(a)].time?(i(),d("div",ye,[_("span",null,"Data Fetched @: "+S(new Date(e(s)[e(a)].time))+",  ",1),_("span",null,"Tech: "+S(e(s)[e(a)].tech.toUpperCase())+",  ",1),e(s)[e(a)].cluster&&o.level==="cluster"?(i(),d("span",fe,"Cluster: "+S(e(s)[e(a)].cluster)+",  ",1)):m("",!0),e(s)[e(a)].region&&o.level==="region"?(i(),d("span",he,"Region: "+S(e(s)[e(a)].region)+",  ",1)):m("",!0),e(s)[e(a)].cell&&o.level==="cell"?(i(),d("span",ge,S(e(s)[e(a)].cell)+",   ",1)):m("",!0),e(s)[e(a)].site&&o.level==="site"?(i(),d("span",xe,S(e(s)[e(a)].site)+",   ",1)):m("",!0)])):m("",!0)]),c(oe,null,{default:M(()=>[c(ie,{modelValue:e(a),"onUpdate:modelValue":u[1]||(u[1]=r=>U(a)?a.value=r:null),dense:"",class:"",style:{border:"1px solid #6a6af1"},"active-color":"primary",align:"justify","narrow-indicator":"","active-class":"bg-primary text-white"},{default:M(()=>[c(O,{name:"nr",label:"NR"}),c(O,{name:"lte",label:"LTE"})]),_:1},8,["modelValue"]),c(re),c(ue,{modelValue:e(a),"onUpdate:modelValue":u[2]||(u[2]=r=>U(a)?a.value=r:null),animated:""},{default:M(()=>[(i(),d($,null,Z(["nr","lte"],r=>c(de,{name:r},{default:M(()=>[_("div",Se,[(i(!0),d($,null,Z(e(b)[r].filter(x=>e(F).indexOf(x)===-1),x=>(i(),p(ce,{class:C(e(T).value),style:{border:"1px #d1d1f5 solid"}},{default:M(()=>[e(k)[r][x]?(i(),p(me,{key:0,data:e(k)[r][x],kpiColumn:x,"time-unit":o.timeUnit,"color-mapping":e(g)},null,8,["data","kpiColumn","time-unit","color-mapping"])):(i(),p(Q,{key:1,"kpi-column":x},null,8,["kpi-column"]))]),_:2},1032,["class"]))),256))])]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1})],64))}};export{ke as default};
