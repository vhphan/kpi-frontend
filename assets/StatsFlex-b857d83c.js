import{e as Z,s as g,f as T,g as j,i as A,h as G,j as J,k as W,l as X,m as Y,n as ee,p as te,q as le,r as N,v as ae,x as se,o as u,c as w,y as c,u as t,S as oe,N as P,a as s,w as n,K as ie,D as E,z as ne,A as ue,B as re,C as de,E as ce,G as B,H as me,I as pe,J as O,L as v,M as z,O as fe,P as ye,b as F,R as M,_ as ge,T as he,U as xe,V as Se,W as ve,X as ke,Y as U,Z as Ce,$ as Me,Q as Fe,F as R,a0 as be,a1 as _e,a2 as D,a3 as V,a4 as we,a5 as I,a6 as $e,a7 as Le,a8 as K,a9 as Ue,aa as De,ab as Ve}from"./index-3253e2e7.js";const Te={__name:"EChartLineMulti",props:{data:{type:Array,required:!0},colorMapping:{type:Object,default:()=>{}},kpiColumn:{type:String,required:!0},addOption:{type:Object,default:()=>{}},showZoom:{type:Boolean,default:!0},timeUnit:{type:String,default:"daily"},theme:{type:String,default:"dark"},cellName:{type:String,default:""},showLegend:{type:Boolean,default:!0},tech:{type:String,default:"nr"}},setup(o){const a=o,e=Z(),i="Asia/Singapore",{dataZoomStart:h,dataZoomEnd:y,selectedOperators:k}=g(e),C=T(()=>e.chartColors.flex.backgroundColor[L.value][a.tech]),x=function(d,p,S){return p===void 0?{}:p.map?(p.filter(l=>k.value.includes(l.name)),{renderer:"canvas",legend:{top:"11%",left:"10%",padding:[0,0,0,10],show:S},dataZoom:[{type:"slider",start:h.value[a.timeUnit],end:y.value[a.timeUnit],show:a.showZoom}],grid:{left:"11%",top:"20%",right:"11%",bottom:a.showZoom?"25%":"13%"},backgroundColor:C.value,xAxis:{type:"time",splitLine:{show:!1}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:l=>`${Math.round(l[0].value[1]*100)/100}`},title:{text:d,textStyle:{fontSize:15},triggerEvent:!0},yAxis:{splitLine:{show:!1},type:"value",scale:!0,name:"",axisLabel:{inside:!1,formatter:l=>l>=1e6?`${(l/1e6).toFixed(2)}M`:l>=1e3?`${(l/1e3).toFixed(0)}k`:l}},series:p.map(l=>{if(!l.data||!l.data.map)return{};const r={data:l.data.map(f=>[ne(f[0],i),f[1]]).sort((f,H)=>f[0]-H[0]),type:"line",name:l.name};return a.colorMapping[l.name]?{...r,itemStyle:{color:a.colorMapping[l.name]}}:r}),...a.addOption}):{}},$=T(()=>x(a.kpiColumn,a.data,a.showLegend));j([A,G,J,W,X,Y,ee,te,le]);const m=N(null);ae(m,d=>{m.value&&se(a.timeUnit)},{immediate:!0});const{darkMode:b}=g(e),L=T(()=>b.value?"dark":"light"),q=function(d){e.updateDataZoom(d,a.timeUnit)},_=N(!1),Q=function(d){console.log(d),console.log(a.kpiColumn),d.componentType==="title"&&(_.value=!0),console.log(m.value.getOption())};return(d,p)=>(u(),w("div",null,[o.data&&o.data.length>0?(u(),c(t(oe),{key:0,ref_key:"chartRef",ref:m,option:t($),theme:t(L),autoresize:!0,style:{height:"300px"},group:o.timeUnit,onDatazoom:q,id:o.kpiColumn,onClick:Q},null,8,["option","theme","group","id"])):(u(),c(P,{key:1,"kpi-column":o.kpiColumn},null,8,["kpi-column"])),s(E,{"model-dialog":_.value,onOnHide:p[0]||(p[0]=S=>_.value=!1),title:"KPI Formula"},{default:n(()=>[s(ie,{"kpi-name":o.kpiColumn,"kpi-type":"flex"},null,8,["kpi-name"])]),_:1},8,["model-dialog"])]))}},Oe={__name:"OperatorsSelector",setup(o){const a=Z(),{selectorClass:e}=a,i=T({get(){return a.selectedOperators},set(y){a.selectedOperators=y}}),h=ue.map(y=>({label:y,value:y}));return(y,k)=>(u(),w("div",null,[s(z,{filled:"",modelValue:t(i),"onUpdate:modelValue":k[0]||(k[0]=C=>O(i)?i.value=C:null),options:t(h),label:"MNO to Display",multiple:"","emit-value":"","map-options":"",style:{"min-width":"200px","max-width":"251px","max-height":"20px"},class:v(t(e))},{option:n(({itemProps:C,opt:x,selected:$,toggleOption:m})=>[s(re,de(ce(C)),{default:n(()=>[s(B,null,{default:n(()=>[s(me,{innerHTML:x.label},null,8,["innerHTML"])]),_:2},1024),s(B,{side:""},{default:n(()=>[s(pe,{"model-value":$,"onUpdate:modelValue":b=>m(x)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","class"])]))}},qe={class:"row"},Qe={style:{height:"4rem","padding-top":"0"}},Re=F("legend",null,"Data",-1),Ne={style:{height:"4rem","padding-top":"0"}},Ze=F("legend",null,"KPI",-1),Be={class:"row"},Ke={__name:"StatsFlex",props:{timeUnit:{type:String,required:!0,validator(o){return["daily","hourly"].includes(o)}},level:{type:String,required:!0,validator(o){return["cluster","region","cell","site","multipleCells","multipleSites"].includes(o)}}},setup(o){const a=o,e=Z(),{selectedTech:i}=g(e),{selectedRegion:h,selectedCluster:y,kpiToExclude:k}=g(e),x=function(){const S={daily:{region:e.dailyStatsRegionFlexMeta,cluster:e.dailyStatsClusterFlexMeta,cell:e.dailyStatsCellFlexMeta,site:e.dailyStatsSiteFlexMeta,multipleCells:e.dailyStatsMultipleCellsFlexMeta,multipleSites:e.dailyStatsMultipleSitesFlexMeta},hourly:{region:e.hourlyStatsRegionFlexMeta,cluster:e.hourlyStatsClusterFlexMeta,cell:e.hourlyStatsCellFlexMeta,site:e.hourlyStatsSiteFlexMeta,multipleCells:e.hourlyStatsMultipleCellsFlexMeta,multipleSites:e.hourlyStatsMultipleSitesFlexMeta}};if(S[a.timeUnit]&&S[a.timeUnit][a.level])return S[a.timeUnit][a.level];throw new Error("Invalid timeUnit or level")}(),m={cluster:{hourly:e.hourlyStatsClusterFlex,daily:e.dailyStatsClusterFlex},region:{hourly:e.hourlyStatsRegionFlex,daily:e.dailyStatsRegionFlex},cell:{hourly:e.hourlyStatsCellFlex,daily:e.dailyStatsCellFlex},site:{hourly:e.hourlyStatsSiteFlex,daily:e.dailyStatsSiteFlex},multipleCells:{hourly:e.hourlyStatsMultipleCellsFlex,daily:e.dailyStatsMultipleCellsFlex},multipleSites:{hourly:e.hourlyStatsMultipleSitesFlex,daily:e.dailyStatsMultipleSitesFlex}}[a.level][a.timeUnit],{fetchData:b}=fe("flex",a,m,x,i);g(e).kpiListFlex;const{kpiListToDisplayFlex:L}=g(e),{regionsArray:q}=g(e);ye(()=>{console.log("onMounted"),b()});const{colorMapping:_,chartSizeClass:Q,selectorClass:d}=g(e),p=N(!1);return(S,l)=>(u(),w(R,null,[F("div",qe,[["multipleCells","multipleSites"].includes(o.level)?M("",!0):(u(),c(z,{key:0,options:t(q),modelValue:t(h),"onUpdate:modelValue":l[0]||(l[0]=r=>O(h)?h.value=r:null),class:v(t(d)),outlined:""},null,8,["options","modelValue","class"])),o.level==="multipleCells"?(u(),c(ge,{key:1,tech:t(i)},null,8,["tech"])):M("",!0),o.level==="multipleSites"?(u(),c(he,{key:2,"api-route-value":t(be).verifySitesList,"store-key-update-time":"selectedMultipleSitesUpdateTime","store-key":"selectedMultipleSites",tech:t(i),"node-name":"site","sync-both-tech":"",example:"DBKLG0424"},null,8,["api-route-value","tech"])):M("",!0),a.level==="cluster"?(u(),c(xe,{key:3,class:v(t(d)),outlined:""},null,8,["class"])):M("",!0),o.level==="cell"?(u(),c(Se,{key:4,tech:t(i),class:v(t(d)),outlined:""},null,8,["tech","class"])):M("",!0),o.level==="site"?(u(),c(ve,{key:5,tech:t(i),class:v(t(d)),outlined:""},null,8,["tech","class"])):M("",!0),s(ke,{"kpi-type":"flex",tech:t(i),class:v(t(d)),onNewVal:t(_e)},null,8,["tech","class","onNewVal"]),s(Oe),F("fieldset",Qe,[Re,s(U,{icon:"refresh",onClick:t(b),color:"primary",class:"q-mb-md q-ml-xs"},{default:n(()=>[s(D,null,{default:n(()=>[V(" Re-fetch data from server ")]),_:1})]),_:1},8,["onClick"]),s(Ce,{"file-name":`${o.level}_${o.timeUnit}_flex_kpi.csv`,data:t(m)[t(i)],class:"q-mb-md q-ml-xs","kpi-type":"flex"},null,8,["file-name","data"])]),F("fieldset",Ne,[Ze,s(U,{icon:"settings",class:"q-mb-xl q-ml-xs",color:"deep-orange-13",onClick:l[1]||(l[1]=r=>p.value=!0)},{default:n(()=>[s(D,null,{default:n(()=>[V(" Select KPI to display and order ")]),_:1})]),_:1}),t(e).showFlexLegend?(u(),c(U,{key:0,icon:"visibility_off",class:"q-mb-xl q-ml-xs",color:"deep-purple-13",onClick:l[2]||(l[2]=()=>t(e).showFlexLegend=!1)},{default:n(()=>[s(D,null,{default:n(()=>[V("Hide Chart Legend")]),_:1})]),_:1})):(u(),c(U,{key:1,icon:"visibility",class:"q-mb-xl q-ml-xs",color:"deep-purple-13",onClick:l[3]||(l[3]=()=>t(e).showFlexLegend=!0)},{default:n(()=>[s(D,null,{default:n(()=>[V("Show Chart Legend")]),_:1})]),_:1}))]),s(Me,{tab:t(i),level:o.level,"store-meta":t(x)},null,8,["tab","level","store-meta"])]),s(Fe,null,{default:n(()=>[s(we,{modelValue:t(i),"onUpdate:modelValue":l[4]||(l[4]=r=>O(i)?i.value=r:null),dense:"",class:"",style:{border:"1px solid #6a6af1"},"active-color":"primary",align:"justify","narrow-indicator":"","active-class":"bg-primary text-white"},{default:n(()=>[s(I,{name:"nr",label:"NR"}),s(I,{name:"lte",label:"LTE"})]),_:1},8,["modelValue"]),s($e),s(Le,{modelValue:t(i),"onUpdate:modelValue":l[5]||(l[5]=r=>O(i)?i.value=r:null),animated:""},{default:n(()=>[(u(),w(R,null,K(["nr","lte"],r=>s(De,{name:r},{default:n(()=>[F("div",Be,[(u(!0),w(R,null,K(t(L)[r].filter(f=>t(k).indexOf(f)===-1),f=>(u(),c(Ve,{class:v(t(Q).value),style:{border:"1px #d1d1f5 solid"},once:""},{default:n(()=>[t(m)[r][f]?(u(),c(Te,{key:0,data:t(m)[r][f],kpiColumn:f,"time-unit":o.timeUnit,"color-mapping":t(_),"show-legend":t(e).showFlexLegend,tech:t(i)},null,8,["data","kpiColumn","time-unit","color-mapping","show-legend","tech"])):(u(),c(P,{key:1,"kpi-column":f},null,8,["kpi-column"]))]),_:2},1032,["class"]))),256))])]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1}),s(E,{modelDialog:p.value,title:`Select KPI to Display and Order [${t(i).toUpperCase()}]`,onOnHide:l[6]||(l[6]=r=>p.value=!1)},{default:n(()=>[s(Ue,{"kpi-type":"flex",tech:t(i)},null,8,["tech"])]),_:1},8,["modelDialog","title"])],64))}};export{Ke as default};
