import{e as N,s as f,f as V,g as I,i as z,h as j,j as A,k as H,l as G,m as J,n as W,p as X,q as Y,r as R,v as ee,x as te,o as u,c as L,y as c,u as t,S as le,N as E,a as s,w as d,K as ae,D as P,z as se,A as ie,B as oe,b as k,C as q,E as x,G as ne,H as S,_ as re,I as ue,J as de,L as ce,M as me,O as pe,P as b,R as ye,T as fe,Q as ge,F as O,U as he,V as xe,W as $,X as _,Y as Se,Z as B,$ as ke,a0 as ve,a1 as K,a2 as Ce,a3 as Me,a4 as Fe}from"./index-82788a6c.js";const we={__name:"EChartLineMulti",props:{data:{type:Array,required:!0},colorMapping:{type:Object,default:()=>{}},kpiColumn:{type:String,required:!0},addOption:{type:Object,default:()=>{}},showZoom:{type:Boolean,default:!0},timeUnit:{type:String,default:"daily"},theme:{type:String,default:"dark"},cellName:{type:String,default:""},showLegend:{type:Boolean,default:!0},tech:{type:String,default:"nr"}},setup(a){const l=a,e=N(),i="Asia/Singapore",{dataZoomStart:v,dataZoomEnd:Q}=f(e),D=V(()=>e.chartColors.flex.backgroundColor[M.value][l.tech]),Z=function(p,m,h){return m===void 0?{}:m.map?{renderer:"canvas",legend:{top:"11%",left:"10%",padding:[0,0,0,10],show:h},dataZoom:[{type:"slider",start:v.value[l.timeUnit],end:Q.value[l.timeUnit],show:l.showZoom}],grid:{left:"11%",top:"20%",right:"11%",bottom:l.showZoom?"25%":"13%"},backgroundColor:D.value,xAxis:{type:"time",splitLine:{show:!1}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:o=>`${Math.round(o[0].value[1]*100)/100}`},title:{text:p,textStyle:{fontSize:15},triggerEvent:!0},yAxis:{splitLine:{show:!1},type:"value",scale:!0,name:"",axisLabel:{inside:!1,formatter:o=>o>=1e6?`${(o/1e6).toFixed(2)}M`:o>=1e3?`${(o/1e3).toFixed(0)}k`:o}},series:m.map(o=>{if(!o.data||!o.data.map)return{};const n={data:o.data.map(r=>[se(r[0],i),r[1]]).sort((r,y)=>r[0]-y[0]),type:"line",name:o.name};return l.colorMapping[o.name]?{...n,itemStyle:{color:l.colorMapping[o.name]}}:n}),...l.addOption}:{}},w=V(()=>Z(l.kpiColumn,l.data,l.showLegend));I([z,j,A,H,G,J,W,X,Y]);const C=R(null);ee(C,p=>{C.value&&te(l.timeUnit)},{immediate:!0});const{darkMode:g}=f(e),M=V(()=>g.value?"dark":"light"),U=function(p){e.updateDataZoom(p,l.timeUnit)},F=R(!1),T=function(p){console.log(p),console.log(l.kpiColumn),p.componentType==="title"&&(F.value=!0),console.log(C.value.getOption())};return(p,m)=>(u(),L("div",null,[a.data&&a.data.length>0?(u(),c(t(le),{key:0,ref_key:"chartRef",ref:C,option:t(w),theme:t(M),autoresize:!0,style:{height:"300px"},group:a.timeUnit,onDatazoom:U,id:a.kpiColumn,onClick:T},null,8,["option","theme","group","id"])):(u(),c(E,{key:1,"kpi-column":a.kpiColumn},null,8,["kpi-column"])),s(P,{"model-dialog":F.value,onOnHide:m[0]||(m[0]=h=>F.value=!1),title:"KPI Formula"},{default:d(()=>[s(ae,{"kpi-name":a.kpiColumn,"kpi-type":"flex"},null,8,["kpi-name"])]),_:1},8,["model-dialog"])]))}},be={class:"row"},$e={style:{height:"4rem","padding-top":"0"}},_e=k("legend",null,"Data",-1),Le={style:{height:"4rem","padding-top":"0"}},De=k("legend",null,"KPI",-1),Ue={class:"row"},Ve={__name:"StatsFlex",props:{timeUnit:{type:String,required:!0,validator(a){return["daily","hourly"].includes(a)}},level:{type:String,required:!0,validator(a){return["cluster","region","cell","site","multipleCells","multipleSites"].includes(a)}}},setup(a){const l=a,e=N(),{selectedTech:i}=f(e),{selectedRegion:v,selectedCluster:Q,kpiToExclude:D}=f(e),w=function(){const o={daily:{region:e.dailyStatsRegionFlexMeta,cluster:e.dailyStatsClusterFlexMeta,cell:e.dailyStatsCellFlexMeta,site:e.dailyStatsSiteFlexMeta,multipleCells:e.dailyStatsMultipleCellsFlexMeta,multipleSites:e.dailyStatsMultipleSitesFlexMeta},hourly:{region:e.hourlyStatsRegionFlexMeta,cluster:e.hourlyStatsClusterFlexMeta,cell:e.hourlyStatsCellFlexMeta,site:e.hourlyStatsSiteFlexMeta,multipleCells:e.hourlyStatsMultipleCellsFlexMeta,multipleSites:e.hourlyStatsMultipleSitesFlexMeta}};if(o[l.timeUnit]&&o[l.timeUnit][l.level])return o[l.timeUnit][l.level];throw new Error("Invalid timeUnit or level")}(),g={cluster:{hourly:e.hourlyStatsClusterFlex,daily:e.dailyStatsClusterFlex},region:{hourly:e.hourlyStatsRegionFlex,daily:e.dailyStatsRegionFlex},cell:{hourly:e.hourlyStatsCellFlex,daily:e.dailyStatsCellFlex},site:{hourly:e.hourlyStatsSiteFlex,daily:e.dailyStatsSiteFlex},multipleCells:{hourly:e.hourlyStatsMultipleCellsFlex,daily:e.dailyStatsMultipleCellsFlex},multipleSites:{hourly:e.hourlyStatsMultipleSitesFlex,daily:e.dailyStatsMultipleSitesFlex}}[l.level][l.timeUnit],{fetchData:M}=ie("flex",l,g,w,i);f(e).kpiListFlex;const{kpiListToDisplayFlex:U}=f(e),{regionsArray:F}=f(e);oe(()=>{console.log("onMounted"),M()});const{colorMapping:T,chartSizeClass:p,selectorClass:m}=f(e),h=R(!1);return(o,n)=>(u(),L(O,null,[k("div",be,[["multipleCells","multipleSites"].includes(a.level)?S("",!0):(u(),c(ne,{key:0,options:t(F),modelValue:t(v),"onUpdate:modelValue":n[0]||(n[0]=r=>q(v)?v.value=r:null),class:x(t(m)),outlined:""},null,8,["options","modelValue","class"])),a.level==="multipleCells"?(u(),c(re,{key:1,tech:t(i)},null,8,["tech"])):S("",!0),a.level==="multipleSites"?(u(),c(ue,{key:2,"api-route-value":t(he).verifySitesList,"store-key-update-time":"selectedMultipleSitesUpdateTime","store-key":"selectedMultipleSites",tech:t(i),"node-name":"site","sync-both-tech":"",example:"DBKLG0424"},null,8,["api-route-value","tech"])):S("",!0),l.level==="cluster"?(u(),c(de,{key:3,class:x(t(m)),outlined:""},null,8,["class"])):S("",!0),a.level==="cell"?(u(),c(ce,{key:4,tech:t(i),class:x(t(m)),outlined:""},null,8,["tech","class"])):S("",!0),a.level==="site"?(u(),c(me,{key:5,tech:t(i),class:x(t(m)),outlined:""},null,8,["tech","class"])):S("",!0),s(pe,{"kpi-type":"flex",tech:t(i),class:x(t(m)),onNewVal:t(xe)},null,8,["tech","class","onNewVal"]),k("fieldset",$e,[_e,s(b,{icon:"refresh",onClick:t(M),color:"primary",class:"q-mb-md q-ml-xs"},{default:d(()=>[s($,null,{default:d(()=>[_(" Re-fetch data from server ")]),_:1})]),_:1},8,["onClick"]),s(ye,{"file-name":`${a.level}_${a.timeUnit}_flex_kpi.csv`,data:t(g)[t(i)],class:"q-mb-md q-ml-xs","kpi-type":"flex"},null,8,["file-name","data"])]),k("fieldset",Le,[De,s(b,{icon:"settings",class:"q-mb-xl q-ml-xs",color:"deep-orange-13",onClick:n[1]||(n[1]=r=>h.value=!0)},{default:d(()=>[s($,null,{default:d(()=>[_(" Select KPI to display and order ")]),_:1})]),_:1}),t(e).showFlexLegend?(u(),c(b,{key:0,icon:"visibility_off",class:"q-mb-xl q-ml-xs",color:"deep-purple-13",onClick:n[2]||(n[2]=()=>t(e).showFlexLegend=!1)},{default:d(()=>[s($,null,{default:d(()=>[_("Hide Chart Legend")]),_:1})]),_:1})):(u(),c(b,{key:1,icon:"visibility",class:"q-mb-xl q-ml-xs",color:"deep-purple-13",onClick:n[3]||(n[3]=()=>t(e).showFlexLegend=!0)},{default:d(()=>[s($,null,{default:d(()=>[_("Show Chart Legend")]),_:1})]),_:1}))]),s(fe,{tab:t(i),level:a.level,"store-meta":t(w)},null,8,["tab","level","store-meta"])]),s(ge,null,{default:d(()=>[s(Se,{modelValue:t(i),"onUpdate:modelValue":n[4]||(n[4]=r=>q(i)?i.value=r:null),dense:"",class:"",style:{border:"1px solid #6a6af1"},"active-color":"primary",align:"justify","narrow-indicator":"","active-class":"bg-primary text-white"},{default:d(()=>[s(B,{name:"nr",label:"NR"}),s(B,{name:"lte",label:"LTE"})]),_:1},8,["modelValue"]),s(ke),s(ve,{modelValue:t(i),"onUpdate:modelValue":n[5]||(n[5]=r=>q(i)?i.value=r:null),animated:""},{default:d(()=>[(u(),L(O,null,K(["nr","lte"],r=>s(Me,{name:r},{default:d(()=>[k("div",Ue,[(u(!0),L(O,null,K(t(U)[r].filter(y=>t(D).indexOf(y)===-1),y=>(u(),c(Fe,{class:x(t(p).value),style:{border:"1px #d1d1f5 solid"},once:""},{default:d(()=>[t(g)[r][y]?(u(),c(we,{key:0,data:t(g)[r][y],kpiColumn:y,"time-unit":a.timeUnit,"color-mapping":t(T),"show-legend":t(e).showFlexLegend,tech:t(i)},null,8,["data","kpiColumn","time-unit","color-mapping","show-legend","tech"])):(u(),c(E,{key:1,"kpi-column":y},null,8,["kpi-column"]))]),_:2},1032,["class"]))),256))])]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1}),s(P,{modelDialog:h.value,title:`Select KPI to Display and Order [${t(i).toUpperCase()}]`,onOnHide:n[6]||(n[6]=r=>h.value=!1)},{default:d(()=>[s(Ce,{"kpi-type":"flex",tech:t(i)},null,8,["tech"])]),_:1},8,["modelDialog","title"])],64))}};export{Ve as default};
