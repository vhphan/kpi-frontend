import{e as N,s as p,f as T,g as P,i as z,h as I,j,k as A,l as H,m as G,n as J,p as W,q as X,r as E,v as Y,x as ee,o as r,y as d,u as t,S as te,N as K,z as le,A as ae,B as se,c as V,b as v,C as q,D as S,E as ie,G as k,_ as oe,H as ne,I as re,J as ue,K as de,a as o,L as ce,w as u,M as w,O as me,P as pe,Q as ye,R as fe,F as R,T as he,U as ge,V as _,W as $,X as xe,Y as Z,Z as Se,$ as ke,a0 as B,a1 as ve,a2 as Ce,a3 as Me}from"./index-ba0f32ca.js";const Fe={__name:"EChartLineMulti",props:{data:{type:Array,required:!0},colorMapping:{type:Object,default:()=>{}},kpiColumn:{type:String,required:!0},addOption:{type:Object,default:()=>{}},showZoom:{type:Boolean,default:!0},timeUnit:{type:String,default:"daily"},theme:{type:String,default:"dark"},cellName:{type:String,default:""},showLegend:{type:Boolean,default:!0},tech:{type:String,default:"nr"}},setup(a){const l=a,e=N(),i="Asia/Singapore",{dataZoomStart:C,dataZoomEnd:O}=p(e),L=T(()=>e.chartColors.flex.backgroundColor[M.value][l.tech]),Q=function(y,h,U){return h===void 0?{}:h.map?{renderer:"canvas",legend:{top:"11%",left:"10%",padding:[0,0,0,10],show:U},dataZoom:[{type:"slider",start:C.value[l.timeUnit],end:O.value[l.timeUnit],show:l.showZoom}],grid:{left:"11%",top:"20%",right:"11%",bottom:l.showZoom?"25%":"13%"},backgroundColor:L.value,xAxis:{type:"time",splitLine:{show:!1}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:s=>`${Math.round(s[0].value[1]*100)/100}`},title:{text:y,textStyle:{fontSize:15},triggerEvent:!0},yAxis:{splitLine:{show:!1},type:"value",scale:!0,name:"",axisLabel:{inside:!1,formatter:s=>s>=1e6?`${(s/1e6).toFixed(2)}M`:s>=1e3?`${(s/1e3).toFixed(0)}k`:s}},series:h.map(s=>{if(!s.data||!s.data.map)return{};const g={data:s.data.map(m=>[le(m[0],i),m[1]]).sort((m,n)=>m[0]-n[0]),type:"line",name:s.name};return l.colorMapping[s.name]?{...g,itemStyle:{color:l.colorMapping[s.name]}}:g}),...l.addOption}:{}},F=T(()=>Q(l.kpiColumn,l.data,l.showLegend));P([z,I,j,A,H,G,J,W,X]);const b=E(null);Y(b,y=>{b.value&&ee(l.timeUnit)},{immediate:!0});const{darkMode:f}=p(e),M=T(()=>f.value?"dark":"light"),D=function(y){e.updateDataZoom(y,l.timeUnit)};return(y,h)=>a.data&&a.data.length>0?(r(),d(t(te),{key:0,ref_key:"chartRef",ref:b,option:t(F),theme:t(M),autoresize:!0,style:{height:"300px"},group:a.timeUnit,onDatazoom:D,id:a.kpiColumn},null,8,["option","theme","group","id"])):(r(),d(K,{key:1,"kpi-column":a.kpiColumn},null,8,["kpi-column"]))}},be={class:"row"},we={style:{height:"4rem","padding-top":"0"}},_e=v("legend",null,"Data",-1),$e={style:{height:"4rem","padding-top":"0"}},Le=v("legend",null,"KPI",-1),De={class:"row"},Te={__name:"StatsFlex",props:{timeUnit:{type:String,required:!0,validator(a){return["daily","hourly"].includes(a)}},level:{type:String,required:!0,validator(a){return["cluster","region","cell","site","multipleCells","multipleSites"].includes(a)}}},setup(a){const l=a,e=N(),{selectedTech:i}=p(e),{selectedRegion:C,selectedCluster:O,kpiToExclude:L}=p(e),F=function(){const m={daily:{region:e.dailyStatsRegionFlexMeta,cluster:e.dailyStatsClusterFlexMeta,cell:e.dailyStatsCellFlexMeta,site:e.dailyStatsSiteFlexMeta,multipleCells:e.dailyStatsMultipleCellsFlexMeta,multipleSites:e.dailyStatsMultipleSitesFlexMeta},hourly:{region:e.hourlyStatsRegionFlexMeta,cluster:e.hourlyStatsClusterFlexMeta,cell:e.hourlyStatsCellFlexMeta,site:e.hourlyStatsSiteFlexMeta,multipleCells:e.hourlyStatsMultipleCellsFlexMeta,multipleSites:e.hourlyStatsMultipleSitesFlexMeta}};if(m[l.timeUnit]&&m[l.timeUnit][l.level])return m[l.timeUnit][l.level];throw new Error("Invalid timeUnit or level")}(),f={cluster:{hourly:e.hourlyStatsClusterFlex,daily:e.dailyStatsClusterFlex},region:{hourly:e.hourlyStatsRegionFlex,daily:e.dailyStatsRegionFlex},cell:{hourly:e.hourlyStatsCellFlex,daily:e.dailyStatsCellFlex},site:{hourly:e.hourlyStatsSiteFlex,daily:e.dailyStatsSiteFlex},multipleCells:{hourly:e.hourlyStatsMultipleCellsFlex,daily:e.dailyStatsMultipleCellsFlex},multipleSites:{hourly:e.hourlyStatsMultipleSitesFlex,daily:e.dailyStatsMultipleSitesFlex}}[l.level][l.timeUnit],{fetchData:M}=ae("flex",l,f,F,i);p(e).kpiListFlex;const{kpiListToDisplayFlex:D}=p(e),{regionsArray:y}=p(e);se(()=>{console.log("onMounted"),M()});const{colorMapping:h,chartSizeClass:U,selectorClass:s}=p(e),g=E(!1);return(m,n)=>(r(),V(R,null,[v("div",be,[["multipleCells","multipleSites"].includes(a.level)?k("",!0):(r(),d(ie,{key:0,options:t(y),modelValue:t(C),"onUpdate:modelValue":n[0]||(n[0]=c=>q(C)?C.value=c:null),class:S(t(s)),outlined:""},null,8,["options","modelValue","class"])),a.level==="multipleCells"?(r(),d(oe,{key:1,tech:t(i)},null,8,["tech"])):k("",!0),a.level==="multipleSites"?(r(),d(ne,{key:2,"api-route-value":t(he).verifySitesList,"store-key-update-time":"selectedMultipleSitesUpdateTime","store-key":"selectedMultipleSites",tech:t(i),"node-name":"site","sync-both-tech":"",example:"DBKLG0424"},null,8,["api-route-value","tech"])):k("",!0),l.level==="cluster"?(r(),d(re,{key:3,class:S(t(s)),outlined:""},null,8,["class"])):k("",!0),a.level==="cell"?(r(),d(ue,{key:4,tech:t(i),class:S(t(s)),outlined:""},null,8,["tech","class"])):k("",!0),a.level==="site"?(r(),d(de,{key:5,tech:t(i),class:S(t(s)),outlined:""},null,8,["tech","class"])):k("",!0),o(ce,{"kpi-type":"flex",tech:t(i),class:S(t(s)),onNewVal:t(ge)},null,8,["tech","class","onNewVal"]),v("fieldset",we,[_e,o(w,{icon:"refresh",onClick:t(M),color:"primary",class:"q-mb-md q-ml-xs"},{default:u(()=>[o(_,null,{default:u(()=>[$(" Re-fetch data from server ")]),_:1})]),_:1},8,["onClick"]),o(me,{"file-name":`${a.level}_${a.timeUnit}_flex_kpi.csv`,data:t(f)[t(i)],class:"q-mb-md q-ml-xs","kpi-type":"flex"},null,8,["file-name","data"])]),v("fieldset",$e,[Le,o(w,{icon:"settings",class:"q-mb-xl q-ml-xs",color:"deep-orange-13",onClick:n[1]||(n[1]=c=>g.value=!0)},{default:u(()=>[o(_,null,{default:u(()=>[$(" Select KPI to display and order ")]),_:1})]),_:1}),t(e).showFlexLegend?(r(),d(w,{key:0,icon:"visibility_off",class:"q-mb-xl q-ml-xs",color:"deep-purple-13",onClick:n[2]||(n[2]=()=>t(e).showFlexLegend=!1)},{default:u(()=>[o(_,null,{default:u(()=>[$("Hide Chart Legend")]),_:1})]),_:1})):(r(),d(w,{key:1,icon:"visibility",class:"q-mb-xl q-ml-xs",color:"deep-purple-13",onClick:n[3]||(n[3]=()=>t(e).showFlexLegend=!0)},{default:u(()=>[o(_,null,{default:u(()=>[$("Show Chart Legend")]),_:1})]),_:1}))]),o(pe,{tab:t(i),level:a.level,"store-meta":t(F)},null,8,["tab","level","store-meta"])]),o(ye,null,{default:u(()=>[o(xe,{modelValue:t(i),"onUpdate:modelValue":n[4]||(n[4]=c=>q(i)?i.value=c:null),dense:"",class:"",style:{border:"1px solid #6a6af1"},"active-color":"primary",align:"justify","narrow-indicator":"","active-class":"bg-primary text-white"},{default:u(()=>[o(Z,{name:"nr",label:"NR"}),o(Z,{name:"lte",label:"LTE"})]),_:1},8,["modelValue"]),o(Se),o(ke,{modelValue:t(i),"onUpdate:modelValue":n[5]||(n[5]=c=>q(i)?i.value=c:null),animated:""},{default:u(()=>[(r(),V(R,null,B(["nr","lte"],c=>o(Ce,{name:c},{default:u(()=>[v("div",De,[(r(!0),V(R,null,B(t(D)[c].filter(x=>t(L).indexOf(x)===-1),x=>(r(),d(Me,{class:S(t(U).value),style:{border:"1px #d1d1f5 solid"},once:""},{default:u(()=>[t(f)[c][x]?(r(),d(Fe,{key:0,data:t(f)[c][x],kpiColumn:x,"time-unit":a.timeUnit,"color-mapping":t(h),"show-legend":t(e).showFlexLegend,tech:t(i)},null,8,["data","kpiColumn","time-unit","color-mapping","show-legend","tech"])):(r(),d(K,{key:1,"kpi-column":x},null,8,["kpi-column"]))]),_:2},1032,["class"]))),256))])]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1}),o(fe,{modelDialog:g.value,title:`Select KPI to Display and Order [${t(i).toUpperCase()}]`,onOnHide:n[6]||(n[6]=c=>g.value=!1)},{default:u(()=>[o(ve,{"kpi-type":"flex",tech:t(i)},null,8,["tech"])]),_:1},8,["modelDialog","title"])],64))}};export{Te as default};
