import{e as B,s as g,f as O,g as A,i as G,h as J,j as W,k as X,l as Y,m as ee,n as te,p as le,q as ae,r as Z,v as se,x as oe,o as r,c as w,y as c,u as t,S as ie,N as E,a as s,w as n,K as ne,D as z,z as re,A as ue,B as de,C as ce,E as me,G as I,H as pe,I as fe,J as q,L as v,M as H,O as ye,P as ge,b as F,R as M,_ as he,T as xe,U as Se,V as ve,W as ke,X as Ce,Y as D,Z as Me,$ as Fe,Q as be,F as N,a0 as _e,a1 as we,a2 as V,a3 as T,a4 as $e,a5 as Le,a6 as K,a7 as Ue,a8 as De,a9 as P,aa as Ve,ab as Te,ac as Oe}from"./index-522bb2ea.js";const qe={__name:"EChartLineMulti",props:{data:{type:Array,required:!0},colorMapping:{type:Object,default:()=>{}},kpiColumn:{type:String,required:!0},addOption:{type:Object,default:()=>{}},showZoom:{type:Boolean,default:!0},timeUnit:{type:String,default:"daily"},theme:{type:String,default:"dark"},cellName:{type:String,default:""},showLegend:{type:Boolean,default:!0},tech:{type:String,default:"nr"}},setup(o){const a=o,e=B(),i="Asia/Singapore",{dataZoomStart:h,dataZoomEnd:y,selectedOperators:k}=g(e),C=O(()=>e.chartColors.flex.backgroundColor[L.value][a.tech]),x=function(d,p,S){if(p===void 0)return{};if(!p.map)return{};const u=p.filter(l=>k.value.includes(l.name));return{renderer:"canvas",legend:{top:"11%",left:"10%",padding:[0,0,0,10],show:S},dataZoom:[{type:"slider",start:h.value[a.timeUnit],end:y.value[a.timeUnit],show:a.showZoom}],grid:{left:"11%",top:"20%",right:"11%",bottom:a.showZoom?"25%":"13%"},backgroundColor:C.value,xAxis:{type:"time",splitLine:{show:!1}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:l=>`${Math.round(l[0].value[1]*100)/100}`},title:{text:d,textStyle:{fontSize:15},triggerEvent:!0},yAxis:{splitLine:{show:!1},type:"value",scale:!0,name:"",axisLabel:{inside:!1,formatter:l=>l>=1e6?`${(l/1e6).toFixed(2)}M`:l>=1e3?`${(l/1e3).toFixed(0)}k`:l}},series:u.map(l=>{if(!l.data||!l.data.map)return{};const f={data:l.data.map(U=>[re(U[0],i),U[1]]).sort((U,j)=>U[0]-j[0]),type:"line",name:l.name};return a.colorMapping[l.name]?{...f,itemStyle:{color:a.colorMapping[l.name]}}:f}),...a.addOption}},$=O(()=>x(a.kpiColumn,a.data,a.showLegend));A([G,J,W,X,Y,ee,te,le,ae]);const m=Z(null);se(m,d=>{m.value&&oe(a.timeUnit)},{immediate:!0});const{darkMode:b}=g(e),L=O(()=>b.value?"dark":"light"),Q=function(d){e.updateDataZoom(d,a.timeUnit)},_=Z(!1),R=function(d){console.log(d),console.log(a.kpiColumn),d.componentType==="title"&&(_.value=!0),console.log(m.value.getOption())};return(d,p)=>(r(),w("div",null,[o.data&&o.data.length>0?(r(),c(t(ie),{key:0,ref_key:"chartRef",ref:m,option:t($),theme:t(L),autoresize:!0,style:{height:"300px"},group:o.timeUnit,onDatazoom:Q,id:o.kpiColumn,onClick:R},null,8,["option","theme","group","id"])):(r(),c(E,{key:1,"kpi-column":o.kpiColumn},null,8,["kpi-column"])),s(z,{"model-dialog":_.value,onOnHide:p[0]||(p[0]=S=>_.value=!1),title:"KPI Formula"},{default:n(()=>[s(ne,{"kpi-name":o.kpiColumn,"kpi-type":"flex"},null,8,["kpi-name"])]),_:1},8,["model-dialog"])]))}},Qe={__name:"OperatorsSelector",setup(o){const a=B(),{selectorClass:e}=a,i=O({get(){return a.selectedOperators},set(y){a.selectedOperators=y}}),h=ue.map(y=>({label:y,value:y}));return(y,k)=>(r(),w("div",null,[s(H,{filled:"",modelValue:t(i),"onUpdate:modelValue":k[0]||(k[0]=C=>q(i)?i.value=C:null),options:t(h),label:"MNO to Display",multiple:"","emit-value":"","map-options":"",style:{"min-width":"200px","max-width":"251px","max-height":"20px"},class:v(t(e))},{option:n(({itemProps:C,opt:x,selected:$,toggleOption:m})=>[s(de,ce(me(C)),{default:n(()=>[s(I,null,{default:n(()=>[s(pe,{innerHTML:x.label},null,8,["innerHTML"])]),_:2},1024),s(I,{side:""},{default:n(()=>[s(fe,{"model-value":$,"onUpdate:modelValue":b=>m(x)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","class"])]))}},Re={class:"row"},Ne={style:{height:"4rem","padding-top":"0"}},Ze=F("legend",null,"Data",-1),Be={style:{height:"4rem","padding-top":"0"}},Ie=F("legend",null,"KPI",-1),Ke={class:"row"},Ee={__name:"StatsFlex",props:{timeUnit:{type:String,required:!0,validator(o){return["daily","hourly"].includes(o)}},level:{type:String,required:!0,validator(o){return["cluster","region","cell","site","multipleCells","multipleSites"].includes(o)}}},setup(o){const a=o,e=B(),{selectedTech:i}=g(e),{selectedRegion:h,selectedCluster:y,kpiToExclude:k}=g(e),x=function(){const S={daily:{region:e.dailyStatsRegionFlexMeta,cluster:e.dailyStatsClusterFlexMeta,cell:e.dailyStatsCellFlexMeta,site:e.dailyStatsSiteFlexMeta,multipleCells:e.dailyStatsMultipleCellsFlexMeta,multipleSites:e.dailyStatsMultipleSitesFlexMeta},hourly:{region:e.hourlyStatsRegionFlexMeta,cluster:e.hourlyStatsClusterFlexMeta,cell:e.hourlyStatsCellFlexMeta,site:e.hourlyStatsSiteFlexMeta,multipleCells:e.hourlyStatsMultipleCellsFlexMeta,multipleSites:e.hourlyStatsMultipleSitesFlexMeta}};if(S[a.timeUnit]&&S[a.timeUnit][a.level])return S[a.timeUnit][a.level];throw new Error("Invalid timeUnit or level")}(),m={cluster:{hourly:e.hourlyStatsClusterFlex,daily:e.dailyStatsClusterFlex},region:{hourly:e.hourlyStatsRegionFlex,daily:e.dailyStatsRegionFlex},cell:{hourly:e.hourlyStatsCellFlex,daily:e.dailyStatsCellFlex},site:{hourly:e.hourlyStatsSiteFlex,daily:e.dailyStatsSiteFlex},multipleCells:{hourly:e.hourlyStatsMultipleCellsFlex,daily:e.dailyStatsMultipleCellsFlex},multipleSites:{hourly:e.hourlyStatsMultipleSitesFlex,daily:e.dailyStatsMultipleSitesFlex}}[a.level][a.timeUnit],{fetchData:b}=ye("flex",a,m,x,i);g(e).kpiListFlex;const{kpiListToDisplayFlex:L}=g(e),{regionsArray:Q}=g(e);ge(()=>{console.log("onMounted"),b()});const{colorMapping:_,chartSizeClass:R,selectorClass:d}=g(e),p=Z(!1);return(S,u)=>(r(),w(N,null,[F("div",Re,[["multipleCells","multipleSites"].includes(o.level)?M("",!0):(r(),c(H,{key:0,options:t(Q),modelValue:t(h),"onUpdate:modelValue":u[0]||(u[0]=l=>q(h)?h.value=l:null),class:v(t(d)),outlined:""},null,8,["options","modelValue","class"])),o.level==="multipleCells"?(r(),c(he,{key:1,tech:t(i)},null,8,["tech"])):M("",!0),o.level==="multipleSites"?(r(),c(xe,{key:2,"api-route-value":t(_e).verifySitesList,"store-key-update-time":"selectedMultipleSitesUpdateTime","store-key":"selectedMultipleSites",tech:t(i),"node-name":"site","sync-both-tech":"",example:"DBKLG0424"},null,8,["api-route-value","tech"])):M("",!0),a.level==="cluster"?(r(),c(Se,{key:3,class:v(t(d)),outlined:""},null,8,["class"])):M("",!0),o.level==="cell"?(r(),c(ve,{key:4,tech:t(i),class:v(t(d)),outlined:""},null,8,["tech","class"])):M("",!0),o.level==="site"?(r(),c(ke,{key:5,tech:t(i),class:v(t(d)),outlined:""},null,8,["tech","class"])):M("",!0),s(Ce,{"kpi-type":"flex",tech:t(i),class:v(t(d)),onNewVal:t(we)},null,8,["tech","class","onNewVal"]),s(Qe),F("fieldset",Ne,[Ze,s(D,{icon:"refresh",onClick:t(b),color:"primary",class:"q-mb-md q-ml-xs"},{default:n(()=>[s(V,null,{default:n(()=>[T(" Re-fetch data from server ")]),_:1})]),_:1},8,["onClick"]),s(Me,{"file-name":`${o.level}_${o.timeUnit}_flex_kpi.csv`,data:t(m)[t(i)],class:"q-mb-md q-ml-xs","kpi-type":"flex"},null,8,["file-name","data"])]),F("fieldset",Be,[Ie,s(D,{icon:"settings",class:"q-mb-xl q-ml-xs",color:"deep-orange-13",onClick:u[1]||(u[1]=l=>p.value=!0)},{default:n(()=>[s(V,null,{default:n(()=>[T(" Select KPI to display and order ")]),_:1})]),_:1}),t(e).showFlexLegend?(r(),c(D,{key:0,icon:"visibility_off",class:"q-mb-xl q-ml-xs",color:"deep-purple-13",onClick:u[2]||(u[2]=()=>t(e).showFlexLegend=!1)},{default:n(()=>[s(V,null,{default:n(()=>[T("Hide Chart Legend")]),_:1})]),_:1})):(r(),c(D,{key:1,icon:"visibility",class:"q-mb-xl q-ml-xs",color:"deep-purple-13",onClick:u[3]||(u[3]=()=>t(e).showFlexLegend=!0)},{default:n(()=>[s(V,null,{default:n(()=>[T("Show Chart Legend")]),_:1})]),_:1})),s($e)]),s(Fe,{tab:t(i),level:o.level,"store-meta":t(x)},null,8,["tab","level","store-meta"])]),s(be,null,{default:n(()=>[s(Le,{modelValue:t(i),"onUpdate:modelValue":u[4]||(u[4]=l=>q(i)?i.value=l:null),dense:"",class:"",style:{border:"1px solid #6a6af1"},"active-color":"primary",align:"justify","narrow-indicator":"","active-class":"bg-primary text-white"},{default:n(()=>[s(K,{name:"nr",label:"NR"}),s(K,{name:"lte",label:"LTE"})]),_:1},8,["modelValue"]),s(Ue),s(De,{modelValue:t(i),"onUpdate:modelValue":u[5]||(u[5]=l=>q(i)?i.value=l:null),animated:""},{default:n(()=>[(r(),w(N,null,P(["nr","lte"],l=>s(Te,{name:l},{default:n(()=>[F("div",Ke,[(r(!0),w(N,null,P(t(L)[l].filter(f=>t(k).indexOf(f)===-1),f=>(r(),c(Oe,{class:v(t(R).value),style:{border:"1px #d1d1f5 solid"},once:""},{default:n(()=>[t(m)[l][f]?(r(),c(qe,{key:0,data:t(m)[l][f],kpiColumn:f,"time-unit":o.timeUnit,"color-mapping":t(_),"show-legend":t(e).showFlexLegend,tech:t(i)},null,8,["data","kpiColumn","time-unit","color-mapping","show-legend","tech"])):(r(),c(E,{key:1,"kpi-column":f},null,8,["kpi-column"]))]),_:2},1032,["class"]))),256))])]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1}),s(z,{modelDialog:p.value,title:`Select KPI to Display and Order [${t(i).toUpperCase()}]`,onOnHide:u[6]||(u[6]=l=>p.value=!1)},{default:n(()=>[s(Ve,{"kpi-type":"flex",tech:t(i)},null,8,["tech"])]),_:1},8,["modelDialog","title"])],64))}};export{Ee as default};
