import{e as X,i as Y,f as ee,g as te,h as ae,j as le,k as re,l as ne,m as oe,n as ie,r as Z,p as R,q as se,s as j,v as _,x as M,o as m,y as w,u as o,S as ue,z as de,A as F,B as L,C as ce,D as me,E as pe,c as C,b as v,a as c,G as ye,H as ge,I as V,t as D,w as h,Q as fe,F as E,J as ve,K as N,L as he,M as xe,N as B,_ as Se,O as Fe,P as Ce,R as _e}from"./index-3b767151.js";const Me={__name:"EChartLineMulti",props:{data:{type:Array,required:!0},colorMapping:{type:Object,default:()=>{}},kpiColumn:{type:String,required:!0},addOption:{type:Object,default:()=>{}},showZoom:{type:Boolean,default:!0},timeUnit:{type:String,default:"daily"},theme:{type:String,default:"dark"},cellName:{type:String,default:""}},setup(u){const e=u,t="Asia/Singapore",l=function(y,f,T=""){return f===void 0?{}:f.map?{renderer:"canvas",legend:{top:"11%",left:"10%",padding:[0,0,0,10],show:!0},dataZoom:[{type:"slider",show:e.showZoom}],grid:{left:"11%",top:"20%",right:"11%",bottom:e.showZoom?"25%":"13%"},xAxis:{type:"time",splitLine:{show:!1}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:r=>`${Math.round(r[0].value[1]*100)/100}`},title:{text:y,textStyle:{fontSize:15},triggerEvent:!0},yAxis:{splitLine:{show:!1},type:"value",scale:!0,name:"",axisLabel:{inside:!1,formatter:r=>r>=1e6?`${(r/1e6).toFixed(2)}M`:r>=1e3?`${(r/1e3).toFixed(0)}k`:r}},series:f.map(r=>{if(!r.data||!r.data.map)return{};const k={data:r.data.map(g=>[de(g[0],t),g[1]]),type:"line",name:r.name};return e.colorMapping[r.name]?{...k,itemStyle:{color:e.colorMapping[r.name]}}:k}),...e.addOption}:{}},p=l(e.kpiColumn,e.data);X([Y,ee,te,ae,le,re,ne,oe,ie]);const s=Z(null);R(s,y=>{s.value&&se(e.timeUnit)},{immediate:!0});const U=()=>{s.value&&s.value.setOption(l(e.kpiColumn,e.data,e.seriesName))};R([()=>e.data,()=>e.colorMapping],()=>{U()},{deep:!0});const $=j(),{darkMode:b}=_($),x=M(()=>b.value?"dark":"light");return(y,f)=>(m(),w(o(ue),{ref_key:"chartRef",ref:s,option:o(p),theme:o(x),autoresize:!0,style:{height:"300px"},group:u.timeUnit},null,8,["option","theme","group"]))}},we={class:"row"},Re={key:1,class:"col q-pl-md q-pt-md"},Ue={class:"row"},ke={__name:"StatsFlex",props:{timeUnit:{type:String,required:!0,validator(u){return["daily","hourly"].includes(u)}},level:{type:String,required:!0,validator(u){return["cluster","region"].includes(u)}}},setup(u){const e=u,t=j(),l=Z("nr"),{selectedRegion:p,selectedCluster:s,kpiColumnsFlex:U,kpiColumnsFlexHourly:$,kpiToExclude:b}=_(t),x=M(()=>e.level==="cluster"?e.timeUnit==="daily"?F.dailyStatsClusterFlex:F.hourlyStatsClusterFlex:e.timeUnit==="daily"?F.dailyStatsRegionFlex:F.hourlyStatsRegionFlex),y=M(()=>e.level==="cluster"&&(!s.value||!s.value.cluster_id)?"":e.level==="cluster"?L(x.value,{tech:l.value,cluster:s.value.cluster_id}):L(x.value,{tech:l.value,region:p.value})),f=[ce(y)];function T(){const{timeUnit:n,level:i}=e,a=g.at(0).value,d={daily:{region:t.dailyStatsRegionFlex,cluster:t.dailyStatsClusterFlex},hourly:{region:t.hourlyStatsRegionFlex,cluster:t.hourlyStatsClusterFlex}},K={daily:{region:t.dailyStatsRegionFlexMeta,cluster:t.dailyStatsClusterFlexMeta},hourly:{region:t.hourlyStatsRegionFlexMeta,cluster:t.hourlyStatsClusterFlexMeta}};if(d[n]&&d[n][i]){const J=d[n][i];J[l.value]=a.data;const W=K[n][i];W[l.value]=a.meta;return}throw new Error("Invalid timeUnit or level in setStoreData")}const{isFetchingArray:r,errorArray:k,dataArray:g,isLoading:q,execute:A}=me(f,()=>{g.length>=1&&g.at(0).value&&g.at(0).value.data&&T()}),z=function(n){if(n==="daily")return U;if(n==="hourly")return $},O=M(()=>{const{timeUnit:n,level:i}=e,a={cluster:{hourly:t.hourlyStatsClusterFlex,daily:t.dailyStatsClusterFlex},region:{hourly:t.hourlyStatsRegionFlex,daily:t.dailyStatsRegionFlex}};if(a[i]&&a[i][n])return a[i][n];throw new Error("Invalid timeUnit or level")}),I=z(e.timeUnit),Q=pe();R(q,()=>{if(q.value){Q.loading.show({});return}Q.loading.hide()});const{regionsArray:P}=_(t);R(()=>y.value,()=>{y.value.length!==0&&(e.level==="cluster"&&(!s.value||!s.value.cluster_id)||A&&A().then(()=>{console.log(`Executed for ${p.value} and ${s.value.cluster_id}`)}))},{immediate:!0});const S=function(){const n={daily:{region:t.dailyStatsRegionFlexMeta,cluster:t.dailyStatsClusterFlexMeta},hourly:{region:t.hourlyStatsRegionFlexMeta,cluster:t.hourlyStatsClusterFlexMeta}};if(n[e.timeUnit]&&n[e.timeUnit][e.level])return n[e.timeUnit][e.level];throw new Error("Invalid timeUnit or level")}(),{colorMapping:G,chartSizeClass:H}=_(t);return(n,i)=>(m(),C(E,null,[v("div",we,[c(ge,{options:o(P),modelValue:o(p),"onUpdate:modelValue":i[0]||(i[0]=a=>ye(p)?p.value=a:null),class:"col-xs-12 col-md-6 col-lg-4 col-xl-3 q-mb-md",outlined:""},null,8,["options","modelValue"]),e.level==="cluster"?(m(),w(Se,{key:0,class:"col-xs-12 col-md-6 col-lg-4 col-xl-3 q-mb-md",outlined:""})):V("",!0),o(S)[l.value].time?(m(),C("div",Re,[v("span",null,"Data Fetched @: "+D(new Date(o(S)[l.value].time))+",  ",1),v("span",null,"Region: "+D(o(S)[l.value].region)+",  ",1),v("span",null,"Tech: "+D(o(S)[l.value].tech.toUpperCase())+",  ",1)])):V("",!0)]),c(fe,null,{default:h(()=>[c(ve,{modelValue:l.value,"onUpdate:modelValue":i[1]||(i[1]=a=>l.value=a),dense:"",class:"",style:{border:"1px solid #6a6af1"},"active-color":"primary",align:"justify","narrow-indicator":"","active-class":"bg-primary text-white"},{default:h(()=>[c(N,{name:"nr",label:"NR"}),c(N,{name:"lte",label:"LTE"})]),_:1},8,["modelValue"]),c(he),c(xe,{modelValue:l.value,"onUpdate:modelValue":i[2]||(i[2]=a=>l.value=a),animated:""},{default:h(()=>[(m(),C(E,null,B(["nr","lte"],a=>c(Fe,{name:a},{default:h(()=>[v("div",Ue,[(m(!0),C(E,null,B(o(I)[a].filter(d=>o(b).indexOf(d)===-1),d=>(m(),w(Ce,{key:`flex-${l.value}-${d}-${u.level}-${u.timeUnit}`,class:_e(o(H).value),style:{border:"1px blue solid"}},{default:h(()=>[o(O)[a][d]?(m(),w(Me,{key:0,data:o(O)[a][d],kpiColumn:d,"time-unit":u.timeUnit,"color-mapping":o(G)},null,8,["data","kpiColumn","time-unit","color-mapping"])):V("",!0)]),_:2},1032,["class"]))),128))])]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1})],64))}};export{ke as default};
