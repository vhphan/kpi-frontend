import{e as Z,s as f,f as O,i as E,g as B,h as z,j,k as A,l as P,m as I,n as G,p as K,r as q,q as L,v as H,x as J,o as n,y as d,u as l,S as W,N,z as X,A as Y,B as ee,c as b,b as R,C as $,D as M,E as te,G as g,_ as le,H as ae,I as se,J as ie,K as ne,a as u,w as y,L as oe,M as re,O as ue,Q as de,F as U,P as ce,R as me,T as pe,U as ye,V as D,W as fe,X as Se,Y as Q,Z as he,$ as xe}from"./index-e1da977e.js";const ge={__name:"EChartLineMulti",props:{data:{type:Array,required:!0},colorMapping:{type:Object,default:()=>{}},kpiColumn:{type:String,required:!0},addOption:{type:Object,default:()=>{}},showZoom:{type:Boolean,default:!0},timeUnit:{type:String,default:"daily"},theme:{type:String,default:"dark"},cellName:{type:String,default:""}},setup(a){const t=a,e=Z(),i="Asia/Singapore",{dataZoomStart:v,dataZoomEnd:w}=f(e),k=function(m,h,V=""){return h===void 0?{}:h.map?{renderer:"canvas",legend:{top:"11%",left:"10%",padding:[0,0,0,10],show:!0},dataZoom:[{type:"slider",start:v.value[t.timeUnit],end:w.value[t.timeUnit],show:t.showZoom}],grid:{left:"11%",top:"20%",right:"11%",bottom:t.showZoom?"25%":"13%"},xAxis:{type:"time",splitLine:{show:!1}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:s=>`${Math.round(s[0].value[1]*100)/100}`},title:{text:m,textStyle:{fontSize:15},triggerEvent:!0},yAxis:{splitLine:{show:!1},type:"value",scale:!0,name:"",axisLabel:{inside:!1,formatter:s=>s>=1e6?`${(s/1e6).toFixed(2)}M`:s>=1e3?`${(s/1e3).toFixed(0)}k`:s}},series:h.map(s=>{if(!s.data||!s.data.map)return{};const p={data:s.data.map(r=>[X(r[0],i),r[1]]).sort((r,o)=>r[0]-o[0]),type:"line",name:s.name};return t.colorMapping[s.name]?{...p,itemStyle:{color:t.colorMapping[s.name]}}:p}),...t.addOption}:{}},_=k(t.kpiColumn,t.data);O([E,B,z,j,A,P,I,G,K]);const c=q(null);L(c,m=>{c.value&&H(t.timeUnit)},{immediate:!0});const T=()=>{c.value&&c.value.setOption(k(t.kpiColumn,t.data,t.seriesName))};L([()=>t.data,()=>t.colorMapping],()=>{T()},{deep:!0});const{darkMode:S}=f(e),C=J(()=>S.value?"dark":"light"),F=function(m){e.updateDataZoom(m,t.timeUnit)};return(m,h)=>a.data&&a.data.length>0?(n(),d(l(W),{key:0,ref_key:"chartRef",ref:c,option:l(_),theme:l(C),autoresize:!0,style:{height:"300px"},group:a.timeUnit,onDatazoom:F},null,8,["option","theme","group"])):(n(),d(N,{key:1,"kpi-column":a.kpiColumn},null,8,["kpi-column"]))}},ve={class:"row"},Me={class:"row"},Ce={__name:"StatsFlex",props:{timeUnit:{type:String,required:!0,validator(a){return["daily","hourly"].includes(a)}},level:{type:String,required:!0,validator(a){return["cluster","region","cell","site","multipleCells","multipleSites"].includes(a)}}},setup(a){const t=a,e=Z(),{selectedTech:i}=f(e),{selectedRegion:v,selectedCluster:w,kpiToExclude:k}=f(e),c=function(){const p={daily:{region:e.dailyStatsRegionFlexMeta,cluster:e.dailyStatsClusterFlexMeta,cell:e.dailyStatsCellFlexMeta,site:e.dailyStatsSiteFlexMeta,multipleCells:e.dailyStatsMultipleCellsFlexMeta,multipleSites:e.dailyStatsMultipleSitesFlexMeta},hourly:{region:e.hourlyStatsRegionFlexMeta,cluster:e.hourlyStatsClusterFlexMeta,cell:e.hourlyStatsCellFlexMeta,site:e.hourlyStatsSiteFlexMeta,multipleCells:e.hourlyStatsMultipleCellsFlexMeta,multipleSites:e.hourlyStatsMultipleSitesFlexMeta}};if(p[t.timeUnit]&&p[t.timeUnit][t.level])return p[t.timeUnit][t.level];throw new Error("Invalid timeUnit or level")}(),S={cluster:{hourly:e.hourlyStatsClusterFlex,daily:e.dailyStatsClusterFlex},region:{hourly:e.hourlyStatsRegionFlex,daily:e.dailyStatsRegionFlex},cell:{hourly:e.hourlyStatsCellFlex,daily:e.dailyStatsCellFlex},site:{hourly:e.hourlyStatsSiteFlex,daily:e.dailyStatsSiteFlex},multipleCells:{hourly:e.hourlyStatsMultipleCellsFlex,daily:e.dailyStatsMultipleCellsFlex},multipleSites:{hourly:e.hourlyStatsMultipleSitesFlex,daily:e.dailyStatsMultipleSitesFlex}}[t.level][t.timeUnit],{fetchData:C}=Y("flex",t,S,c,i),F=f(e).kpiListFlex,{regionsArray:m}=f(e);ee(()=>{console.log("onMounted"),C()});const{colorMapping:h,chartSizeClass:V}=f(e),s=q("col-xs-12 col-md-6 col-lg-4 col-xl-3 q-mb-md");return(p,r)=>(n(),b(U,null,[R("div",ve,[["multipleCells","multipleSites"].includes(a.level)?g("",!0):(n(),d(te,{key:0,options:l(m),modelValue:l(v),"onUpdate:modelValue":r[0]||(r[0]=o=>$(v)?v.value=o:null),class:M(s.value),outlined:""},null,8,["options","modelValue","class"])),a.level==="multipleCells"?(n(),d(le,{key:1,tech:l(i)},null,8,["tech"])):g("",!0),a.level==="multipleSites"?(n(),d(ae,{key:2,"api-route-value":l(ce).verifySitesList,"store-key-update-time":"selectedMultipleSitesUpdateTime","store-key":"selectedMultipleSites",tech:l(i),"node-name":"site","sync-both-tech":"",example:"DBKLG0424"},null,8,["api-route-value","tech"])):g("",!0),t.level==="cluster"?(n(),d(se,{key:3,class:M(s.value),outlined:""},null,8,["class"])):g("",!0),a.level==="cell"?(n(),d(ie,{key:4,tech:l(i),class:M(s.value),outlined:""},null,8,["tech","class"])):g("",!0),a.level==="site"?(n(),d(ne,{key:5,tech:l(i),class:M(s.value),outlined:""},null,8,["tech","class"])):g("",!0),u(oe,{icon:"refresh",onClick:l(C),color:"primary",class:"q-mb-md q-ml-xs"},{default:y(()=>[u(me,null,{default:y(()=>[pe(" Re-fetch data from server ")]),_:1})]),_:1},8,["onClick"]),u(re,{"file-name":`${a.level}_${a.timeUnit}_flex_kpi.csv`,data:l(S)[l(i)],class:"q-mb-md q-ml-xs","kpi-type":"flex"},null,8,["file-name","data"]),u(ue,{tab:l(i),level:a.level,"store-meta":l(c)},null,8,["tab","level","store-meta"])]),u(de,null,{default:y(()=>[u(ye,{modelValue:l(i),"onUpdate:modelValue":r[1]||(r[1]=o=>$(i)?i.value=o:null),dense:"",class:"",style:{border:"1px solid #6a6af1"},"active-color":"primary",align:"justify","narrow-indicator":"","active-class":"bg-primary text-white"},{default:y(()=>[u(D,{name:"nr",label:"NR"}),u(D,{name:"lte",label:"LTE"})]),_:1},8,["modelValue"]),u(fe),u(Se,{modelValue:l(i),"onUpdate:modelValue":r[2]||(r[2]=o=>$(i)?i.value=o:null),animated:""},{default:y(()=>[(n(),b(U,null,Q(["nr","lte"],o=>u(he,{name:o},{default:y(()=>[R("div",Me,[(n(!0),b(U,null,Q(l(F)[o].filter(x=>l(k).indexOf(x)===-1),x=>(n(),d(xe,{class:M(l(V).value),style:{border:"1px #d1d1f5 solid"},once:""},{default:y(()=>[l(S)[o][x]?(n(),d(ge,{key:0,data:l(S)[o][x],kpiColumn:x,"time-unit":a.timeUnit,"color-mapping":l(h)},null,8,["data","kpiColumn","time-unit","color-mapping"])):(n(),d(N,{key:1,"kpi-column":x},null,8,["kpi-column"]))]),_:2},1032,["class"]))),256))])]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1})],64))}};export{Ce as default};
